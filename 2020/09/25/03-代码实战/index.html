<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>代码片段 | TomorrowLM-Web</title><meta name="author" content="LMTomorrow,120329698@qq.com"><meta name="copyright" content="LMTomorrow"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="代码实战"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://tomorrowlm.github.io/2020/09/25/03-%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '代码片段',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-05-30 13:42:36'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom/custom.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiperstyle.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.css"><link rel="stylesheet" href="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.css" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">44</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 目录</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw anzhiyu-icon-music"></i><span> 音乐馆</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/cover_1.gif')"><nav id="nav"><span id="blog-info"><a href="/" title="TomorrowLM-Web"><span class="site-name">TomorrowLM-Web</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 目录</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 文章</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw anzhiyu-icon-music"></i><span> 音乐馆</span></a></li><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">代码片段</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-09-24T16:00:00.000Z" title="发表于 2020-09-25 00:00:00">2020-09-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-05-30T05:42:36.428Z" title="更新于 2023-05-30 13:42:36">2023-05-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AE%9E%E6%88%98/">实战</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">20.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>87分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="代码片段"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="代码合集收藏"><a href="#代码合集收藏" class="headerlink" title="代码合集收藏"></a>代码合集收藏</h1><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/w9iLd56H4xyXSlRwiKs04g">https://mp.weixin.qq.com/s/w9iLd56H4xyXSlRwiKs04g</a></p>
<h1 id="css"><a href="#css" class="headerlink" title="css"></a>css</h1><p>​     &lt;!– <div class="dash" style="position: absolute; bottom: 0; width: 150px; height: 150px; margin-right: 20px"></p>
<pre><code>        &lt;div style=&quot;width: 150px; height: 150px; background: rgb(204 204 204 / 35%)&quot;&gt;&lt;/div&gt;
</code></pre>
<p>​     </div> –&gt;</p>
<h2 id="蒙版"><a href="#蒙版" class="headerlink" title="蒙版"></a>蒙版</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.page</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>:relative;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.page</span>:after&#123;</span><br><span class="line">    position:absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(data-text);</span><br><span class="line">    <span class="comment">/* transition:all 1s ease; */</span></span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">100%</span>);</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#FFF</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* .page:hover:after&#123;</span></span><br><span class="line"><span class="comment">    transform: translateY(0);</span></span><br><span class="line"><span class="comment">&#125; */</span></span><br></pre></td></tr></table></figure>

<h2 id="三角形"><a href="#三角形" class="headerlink" title="三角形"></a>三角形</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">border</span>: <span class="number">100px</span> solid transparent;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">border-top-color</span>: deeppink;</span><br><span class="line">    <span class="attribute">border-left-color</span>: deeppink;</span><br><span class="line">    <span class="comment">/*border-right-color: deeppink;*/</span></span><br><span class="line">    <span class="comment">/*border-bottom-color: deeppink;*/</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="js"><a href="#js" class="headerlink" title="js"></a>js</h1><h2 id="内置方法"><a href="#内置方法" class="headerlink" title="内置方法"></a>内置方法</h2><h3 id="Math"><a href="#Math" class="headerlink" title="Math"></a>Math</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.PI						<span class="comment">// 圆周率</span></span><br><span class="line"><span class="built_in">Math</span>.random()				<span class="comment">// 返回介于0（包含） ~ 1（不包含） 之间的一个随机数</span></span><br><span class="line"><span class="built_in">Math</span>.floor()/<span class="built_in">Math</span>.ceil()	 <span class="comment">// 向下取整/向上取整</span></span><br><span class="line"><span class="built_in">Math</span>.round()				<span class="comment">// 取整，四舍五入</span></span><br><span class="line"><span class="built_in">Math</span>.abs()					<span class="comment">// 绝对值</span></span><br><span class="line"><span class="built_in">Math</span>.max()/<span class="built_in">Math</span>.min()		 <span class="comment">// 求最大和最小值                                                                                                           </span></span><br><span class="line"><span class="built_in">Math</span>.sin()<span class="built_in">Math</span>.cos()		 <span class="comment">// 正弦/余弦</span></span><br><span class="line"><span class="built_in">Math</span>.power(基数，指数)/<span class="built_in">Math</span>.sqrt()	 <span class="comment">// 求指数次幂/求平方根</span></span><br></pre></td></tr></table></figure>

<h4 id="round"><a href="#round" class="headerlink" title="round"></a>round</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Math.ceil(Math.random()*10);     // 获取从 1 到 10 的随机整数，取 0 的概率极小。</span><br><span class="line"></span><br><span class="line">Math.round(Math.random());       // 可均衡获取 0 到 1 的随机整数。</span><br><span class="line"></span><br><span class="line">Math.floor(Math.random()*10);    // 可均衡获取 0 到 9 的随机整数。</span><br><span class="line"></span><br><span class="line">Math.round(Math.random()*10);    // 基本均衡获取 0 到 10 的随机整数，其中获取最小值 0 和最大值 10 的几率少一半。</span><br></pre></td></tr></table></figure>

<h4 id="Math-trunc"><a href="#Math-trunc" class="headerlink" title="Math.trunc()"></a>Math.trunc()</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.</span></span><br><span class="line"><span class="comment">//Math.trunc方法用于去除一个数的小数部分，返回整数部分。</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(<span class="number">4.1</span>) <span class="comment">// 4</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(<span class="number">4.9</span>) <span class="comment">// 4</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(-<span class="number">4.1</span>) <span class="comment">// -4</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(-<span class="number">4.9</span>) <span class="comment">// -4</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(-<span class="number">0.1234</span>) <span class="comment">// -0</span></span><br><span class="line"><span class="comment">//对于非数值，Math.trunc内部使用Number方法将其先转为数值。</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(<span class="string">&#x27;123.456&#x27;</span>) <span class="comment">// 123</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(<span class="literal">true</span>) <span class="comment">//1</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(<span class="literal">false</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(<span class="literal">null</span>) <span class="comment">// 0</span></span><br><span class="line"><span class="comment">//对于空值和无法截取整数的值，返回NaN。</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(<span class="literal">NaN</span>);      <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(<span class="string">&#x27;foo&#x27;</span>);    <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">Math</span>.trunc();         <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">Math</span>.trunc(<span class="literal">undefined</span>) <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>

<h4 id="Math-sign"><a href="#Math-sign" class="headerlink" title="Math.sign()"></a>Math.sign()</h4><p><code>Math.sign</code>方法用来判断一个数到底是正数、负数、还是零。</p>
<p>它会返回五种值。</p>
<ul>
<li>参数为正数，返回+1；</li>
<li>参数为负数，返回-1；</li>
<li>参数为0，返回0；</li>
<li>参数为-0，返回-0;</li>
<li>其他值，返回NaN。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.sign(<span class="string">&#x27;&#x27;</span>)  <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Math</span>.sign(<span class="literal">true</span>)  <span class="comment">// +1</span></span><br><span class="line"><span class="built_in">Math</span>.sign(<span class="literal">false</span>)  <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Math</span>.sign(<span class="literal">null</span>)  <span class="comment">// 0</span></span><br><span class="line"><span class="built_in">Math</span>.sign(<span class="string">&#x27;9&#x27;</span>)  <span class="comment">// +1</span></span><br><span class="line"><span class="built_in">Math</span>.sign(<span class="string">&#x27;foo&#x27;</span>)  <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">Math</span>.sign()  <span class="comment">// NaN</span></span><br><span class="line"><span class="built_in">Math</span>.sign(<span class="literal">undefined</span>)  <span class="comment">// NaN</span></span><br></pre></td></tr></table></figure>

<h4 id="Math-cbrt"><a href="#Math-cbrt" class="headerlink" title="Math.cbrt()"></a>Math.cbrt()</h4><p>方法用于计算一个数的立方根。对于非数值，Math.cbrt()方法内部也是先使用Number()方法将其转为数值。</p>
<h4 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h4><h5 id="生成从minNum到maxNum的随机数"><a href="#生成从minNum到maxNum的随机数" class="headerlink" title="生成从minNum到maxNum的随机数"></a>生成从minNum到maxNum的随机数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">//生成从minNum到maxNum的随机数</span><br><span class="line">function randomNum(minNum,maxNum)&#123; </span><br><span class="line">    switch(arguments.length)&#123; </span><br><span class="line">        case 1: </span><br><span class="line">            return parseInt(Math.random()*minNum+1,10); </span><br><span class="line">        break; </span><br><span class="line">        case 2: </span><br><span class="line">            return parseInt(Math.random()*(maxNum-minNum+1)+minNum,10); </span><br><span class="line">        break; </span><br><span class="line">            default: </span><br><span class="line">                return 0; </span><br><span class="line">            break; </span><br><span class="line">    &#125; </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h3 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h3><h4 id="new-Date-创建新的日期对象"><a href="#new-Date-创建新的日期对象" class="headerlink" title="**new Date()**创建新的日期对象"></a>**new Date()**创建新的日期对象</h4><ol>
<li><p>用整数初始化日期对象</p>
<p>new Date(yyyy,mth,dd,hh,mm,ss);<br>new Date(yyyy,mth,dd); </p>
<p>注意：</p>
<ul>
<li>您不能省略月份。如果只提供一个参数，则将其视为毫秒。</li>
<li>一位和两位数年份将被解释为 19xx 年：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yyyy:四位数表示的年份</span><br><span class="line">mth:用整数表示月份，从（１月）0到１１（１２月）</span><br><span class="line">dd:表示一个 月中的第几天，从1到31</span><br><span class="line">hh:小时数，从0（午夜）到23（晚11点）</span><br><span class="line">mm: 分钟数，从0到59的整数</span><br><span class="line">ss:秒数，从0到59的整数</span><br></pre></td></tr></table></figure></li>
<li><p>用字符串初始化日期对象</p>
<p>new Date(“2017/06/06”); </p>
<p>new Date(“2017-08-08”); </p>
<p>new Date(“month dd,yyyy hh:mm:ss”);  </p>
<p>new Date(“month dd,yyyy”);</p>
</li>
<li><p>用毫秒时间戳初始化日期对象</p>
<p>new Date(ms);</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JavaScript 将日期存储为自 1970 年 1 月 1 日 00:00:00 UTC（协调世界时）以来的毫秒数。</span><br><span class="line">零时间是 1970 年 1 月 1 日 00:00:00 UTC。</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="获取日期方法"><a href="#获取日期方法" class="headerlink" title="获取日期方法"></a>获取日期方法</h4><table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">getDate()</td>
<td align="left">以数值返回天（1-31）</td>
</tr>
<tr>
<td align="left">getDay()</td>
<td align="left">以数值获取周名（0-6）</td>
</tr>
<tr>
<td align="left">getFullYear()</td>
<td align="left">获取四位的年（yyyy）</td>
</tr>
<tr>
<td align="left">getHours()</td>
<td align="left">获取小时（0-23）</td>
</tr>
<tr>
<td align="left">getMilliseconds()</td>
<td align="left">获取毫秒（0-999）</td>
</tr>
<tr>
<td align="left">getMinutes()</td>
<td align="left">获取分（0-59）</td>
</tr>
<tr>
<td align="left">getMonth()</td>
<td align="left">获取月（0-11）</td>
</tr>
<tr>
<td align="left">getSeconds()</td>
<td align="left">获取秒（0-59）</td>
</tr>
<tr>
<td align="left">getTime()</td>
<td align="left">获取时间（从 1970 年 1 月 1 日至今）</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">date.getFullYear()//获取完整的年份(4位,1970-????)</span><br><span class="line">date.getMonth() //获取当前月份(0-11,0代表1月)</span><br><span class="line">date.getDate()//获取几号   - 0 - 31 比如25</span><br><span class="line">date.getDay()//获取星期几 - 比如星期3的3</span><br><span class="line">date.getHours()//获取小时</span><br><span class="line">date.getTime()// 获取相对于1970-01-01的毫秒值</span><br></pre></td></tr></table></figure>

<h4 id="日期设置方法"><a href="#日期设置方法" class="headerlink" title="日期设置方法"></a>日期设置方法</h4><p>设置方法用于设置日期的某个部分。下面是最常用的方法（按照字母顺序排序）：</p>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">setDate()</td>
<td align="left">以数值（1-31）设置日</td>
</tr>
<tr>
<td align="left">setFullYear()</td>
<td align="left">设置年（可选月和日）</td>
</tr>
<tr>
<td align="left">setHours()</td>
<td align="left">设置小时（0-23）</td>
</tr>
<tr>
<td align="left">setMilliseconds()</td>
<td align="left">设置毫秒（0-999）</td>
</tr>
<tr>
<td align="left">setMinutes()</td>
<td align="left">设置分（0-59）</td>
</tr>
<tr>
<td align="left">setMonth()</td>
<td align="left">设置月（0-11）</td>
</tr>
<tr>
<td align="left">setSeconds()</td>
<td align="left">设置秒（0-59）</td>
</tr>
<tr>
<td align="left">setTime()</td>
<td align="left">设置时间（从 1970 年 1 月 1 日至今的毫秒数）</td>
</tr>
</tbody></table>
<h4 id="时间戳转化为日期的方式"><a href="#时间戳转化为日期的方式" class="headerlink" title="时间戳转化为日期的方式"></a><strong>时间戳转化为日期的方式</strong></h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// Mon May 28 2018</span><br><span class="line">console.log(newDate.toDateString());</span><br><span class="line"> </span><br><span class="line">// Mon, 28 May 2018 15:24:12 GMT</span><br><span class="line">console.log(newDate.toGMTString());</span><br><span class="line"> </span><br><span class="line">// 2018-05-28T15:24:12.000Z</span><br><span class="line">console.log(newDate.toISOString());</span><br><span class="line"> </span><br><span class="line">// 2018-05-28T15:24:12.000Z</span><br><span class="line">console.log(newDate.toJSON());</span><br><span class="line"></span><br><span class="line">// 2018/5/28</span><br><span class="line">console.log(newDate.toLocaleDateString());</span><br><span class="line"> </span><br><span class="line">// 2018/5/28 下午11:24:12</span><br><span class="line">console.log(newDate.toLocaleString());</span><br><span class="line"> </span><br><span class="line">// 下午11:24:12</span><br><span class="line">console.log(newDate.toLocaleTimeString());</span><br><span class="line"> </span><br><span class="line">// Mon May 28 2018 23:24:12 GMT+0800 (中国标准时间)</span><br><span class="line">console.log(newDate.toString());</span><br><span class="line"> </span><br><span class="line">// 23:24:12 GMT+0800 (中国标准时间)</span><br><span class="line">console.log(newDate.toTimeString());</span><br><span class="line"> </span><br><span class="line">// Mon, 28 May 2018 15:24:12 GMT</span><br><span class="line">console.log(newDate.toUTCString());</span><br></pre></td></tr></table></figure>

<h3 id="console"><a href="#console" class="headerlink" title="console"></a>console</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.console);<span class="comment">//打印信息</span></span><br><span class="line"><span class="built_in">console</span>.error(<span class="string">&#x27;报错信息&#x27;</span>);<span class="comment">//打印报错，但是不会影响代码继续执行</span></span><br><span class="line"><span class="built_in">console</span>.warn(<span class="string">&#x27;警告信息&#x27;</span>);<span class="comment">//警告信息</span></span><br><span class="line"><span class="keyword">let</span> isDebug = <span class="literal">false</span></span><br><span class="line"><span class="built_in">console</span>.assert(isDebug, <span class="string">&#x27;打印报错信息&#x27;</span>)<span class="comment">//断言，判断当条件为false，会打印错误信息（不影响代码继续执行）</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Myfn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.count(<span class="string">&#x27;My被执行的次数：&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line">Myfn()</span><br><span class="line">Myfn()</span><br><span class="line">Myfn()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> array = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">10000</span>)</span><br><span class="line"><span class="keyword">let</span> obj;</span><br><span class="line"><span class="keyword">let</span> obj1 = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; <span class="number">10000</span>; index++) &#123;</span><br><span class="line">  obj1[<span class="string">`obj_<span class="subst">$&#123;index&#125;</span>`</span>] = index</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 启动计时器</span></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&#x27;testForEach&#x27;</span>);</span><br><span class="line"><span class="comment">// (写一些测试用代码)</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; array.length; index++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (index === <span class="number">9999</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(index);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 停止计时，输出时间</span></span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">&#x27;testForEach&#x27;</span>);</span><br><span class="line"><span class="comment">// 启动计时器</span></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&#x27;testForEach&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj1[<span class="string">&#x27;obj_9999&#x27;</span>]);</span><br><span class="line"><span class="comment">// 停止计时，输出时间</span></span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">&#x27;testForEach&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.time(<span class="string">&#x27;for&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> array = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">100000</span>)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; array.length; index++) &#123;</span><br><span class="line">  <span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">&#x27;for&#x27;</span>);<span class="comment">//循环执行需要多少时间</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> list = [&#123; <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&#x27;王美丽&#x27;</span>, <span class="attr">age</span>: <span class="number">19</span>, <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span> &#125;, &#123;&#125;]<span class="comment">//这里不知道为什么我的浏览器不显示最后一个，所以我就在数组后面加了一个空对象</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.table(list);<span class="comment">//让数组和对象数据更加直观的可以看到</span></span><br></pre></td></tr></table></figure>

<h3 id="defer和async"><a href="#defer和async" class="headerlink" title="defer和async"></a>defer和async</h3><p>页面的加载和渲染过程：</p>
<ol>
<li>浏览器通过HTTP协议请求服务器，获取HMTL文档并开始从上到下解析，构建DOM树；</li>
<li>在构建DOM过程中，如果遇到外联的样式声明和脚本声明，则暂停文档解析，创建新的网络连接，并开始下载样式文件和脚本文件；</li>
<li>样式文件下载完成后，构建样式表；脚本文件下载完成后，解释并执行，然后继续解析文档构建DOM</li>
<li>完成文档解析后，将DOM树和样式表进行关联和映射，最后将视图渲染到浏览器窗口</li>
</ol>
<blockquote>
<p>defer和async只对外部脚本有效（引入的js文件）</p>
</blockquote>
<ul>
<li><code>defer</code>script异步加载，html解析完,DomCOntentLoaded之前执行</li>
<li><code>async</code>script加载完后会立即执行,执行的过程仍会阻塞后续html的解析</li>
</ul>
<p><img src="https://img2018.cnblogs.com/blog/1237064/201902/1237064-20190225103106193-1835436522.jpg" alt="img"></p>
<ul>
<li>蓝色线代表网络读取，</li>
<li>红色线代表js执行时间</li>
<li>绿色线代表 HTML 解析。</li>
</ul>
<ol>
<li>通常情况下defer的使用频率较高,它能保证script之间的变量依赖。</li>
<li>需要注意的是:async script的资源请求时异步的,但script的执行仍然会阻塞后续渲染(单线程),defer是在html渲染完之后执行的所以不会阻塞后续html的解析。</li>
</ol>
<h3 id="setTimeout"><a href="#setTimeout" class="headerlink" title="setTimeout"></a>setTimeout</h3><p>setTimeout() 方法用于在指定的毫秒数后调用函数或计算表达式</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>function</td>
<td>必需。要调用的函数后要执行的 JavaScript 代码串。</td>
</tr>
<tr>
<td>millisec</td>
<td>可选。执行或调用 code/function 需要等待的时间，以毫秒计。默认为 0。</td>
</tr>
<tr>
<td>param1, param2, …</td>
<td>可选。 传给执行函数的其他参数（IE9 及其更早版本不支持该参数）</td>
</tr>
</tbody></table>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function show(x, y, z) &#123;</span><br><span class="line">  console.log(x, y, z)</span><br><span class="line">&#125;</span><br><span class="line">//第三个及以后的参数都可以作为show函数的参数</span><br><span class="line">setTimeout(show, 100, 1, 2, 3)</span><br></pre></td></tr></table></figure>

<p><strong>实例</strong></p>
<p>看以下例子可以知道，代码运行为6次打印了6。因为setTimeout因为是一个异步函数，var变量存在变量提升、无块级作用域等，等执行到setTimeout时，for循环已经遍历结束，i的值已经是6。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i) <span class="comment">//6,6,6,6,6,6</span></span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解决办法</p>
<p>1、闭包；使用闭包将i的值驻留在内存中，打印j的值（形成了自己的作用域），实际的外部函数的变量i</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params">j</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(j)<span class="comment">// 0,1,2,3,4,5</span></span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、setTimeout的第三个参数，该参数就是给setTimeout第一个函数的参数。每次传入setTimeout第一个函数的j值是for遍历的值，个人认为还是作用域的问题。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(</span><br><span class="line">    <span class="function">(<span class="params">j</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(j)<span class="comment">// 0,1,2,3,4,5</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="number">1000</span>,</span><br><span class="line">    i</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="MutationObserver"><a href="#MutationObserver" class="headerlink" title="MutationObserver"></a>MutationObserver</h3><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver/MutationObserver">https://developer.mozilla.org/zh-CN/docs/Web/API/MutationObserver/MutationObserver</a></p>
<p>当父元素中的元素有删减，会调用该函数。</p>
<p>eg：点击按钮，table中添加tr，调用该函数，可以为tr中的input设置disabled</p>
<p>tip: 添加合理的判断条件，否则会执行死循环</p>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p><strong>JS的基本数据类型和引用数据类型</strong></p>
<ul>
<li>基本数据类型：<code>undefined</code>、<code>null</code>、<code>boolean</code>、<code>number</code>、<code>string</code>、<code>symbol</code></li>
<li>引用数据类型：<code>object</code>、<code>array</code>、<code>function</code></li>
</ul>
<h3 id="number"><a href="#number" class="headerlink" title="number"></a>number</h3><h4 id="数值判断转换"><a href="#数值判断转换" class="headerlink" title="数值判断转换"></a><strong>数值判断转换</strong></h4><ul>
<li><p>NaN：not a number 该属性用于指示某个值不是数字。 </p>
<ul>
<li>NaN 与任何值都不相等，包括他本身</li>
</ul>
</li>
<li><p>isNaN: is not a number判断是否是数字，若是数字返回false</p>
</li>
<li><p>isFinite(number ) 函数用于检查其参数是否是无穷大。</p>
<p><strong>提示：</strong> 如果 number 是 NaN（非数字），或者是正、负无穷大的数，则返回 false。</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">undefined表示一个声明了没有初始化的变量，变量只声明的时候值默认是undefined</span><br><span class="line">null表示一个空，变量的值如果想为null，必须手动设置</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">布尔类型的隐式转换：转换为true   非空字符串  非0数字  true 任何对象</span><br><span class="line">				转换成false  空字符串  0  false  null  undefined</span><br></pre></td></tr></table></figure>

<p>转换成字符串类型：</p>
<ul>
<li>toString() String() 拼接字符串方式</li>
</ul>
<p><strong>转换成数值类型：</strong></p>
<ul>
<li><p>1.Number()可以把任意值转换成数值，如果要转换的字符串中有一个不是数值的字符，返回NaN </p>
</li>
<li><p>2.parseInt() </p>
</li>
<li><p>3.parseFloat()</p>
</li>
</ul>
<h4 id="实战-1"><a href="#实战-1" class="headerlink" title="实战"></a>实战</h4><h5 id="判断字符串或者数字是否是正整数"><a href="#判断字符串或者数字是否是正整数" class="headerlink" title="判断字符串或者数字是否是正整数"></a>判断字符串或者数字是否是正整数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const isInteger = (s) =&gt; &#123;</span><br><span class="line">    var re = /^[0-9]+$/;</span><br><span class="line">    return re.test(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>判断字符串或者数字是否是小数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const isDecimal = (s) =&gt; &#123;</span><br><span class="line">	var re1 = /^[0-9]+$/;</span><br><span class="line">	var re2 = /^[0-9]+\.?[0-9]+?$/;</span><br><span class="line">    return !re.test(s) &amp;&amp; re2.test(s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><p><strong>不会改变原来的字符串</strong></p>
<h4 id="charAt"><a href="#charAt" class="headerlink" title="charAt"></a>charAt</h4><p>charAt(index)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">获取指定位置处字符 myString.charAt(1)</span><br></pre></td></tr></table></figure>

<p>charCodeAt()      //获取指定位置处字符的ASCII码</p>
<h4 id="indexOf"><a href="#indexOf" class="headerlink" title="indexOf"></a>indexOf</h4><p>indexOf(‘’,[index] )       </p>
<p>返回指定内容在元字符串中的位置，只找第一个匹配的，若没有则返回-1</p>
<p>indexOf(‘a’,2);从位置2开始找到a的位置<br>lastIndexOf()     //从后往前找，只找第一个匹配的</p>
<h4 id="lastIndexOf"><a href="#lastIndexOf" class="headerlink" title="lastIndexOf"></a>lastIndexOf</h4><p>lastIndexOf(‘’)</p>
<h4 id="concat"><a href="#concat" class="headerlink" title="concat"></a>concat</h4><p>拼接字符串，等效于+，+更常用</p>
<h4 id="slice"><a href="#slice" class="headerlink" title="slice"></a>slice</h4><p>提取字符串的一部分，并返回新的字符串</p>
<p>str.slice(start, end) </p>
<p>end 参数可选，start可取正值，也可取负值。</p>
<p>取正值时表示从索引为start的位置截取到end的位置(不包括end所在位置的字符，如果end省略则截取到字符串末尾）<br>取负值时表示从索引为 length+start 位置截取到end所在位置的字符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ar str = &quot;It is our choices that show what we truly are, far more than our abilities.&quot;;</span><br><span class="line">console.log(str.slice(0,-30)); // It is our choices that show what we truly are</span><br><span class="line">console.log(str.slice(-30)); // , far more than our abilities.</span><br></pre></td></tr></table></figure>

<h4 id="substring"><a href="#substring" class="headerlink" title="substring"></a>substring</h4><p>str.slice(start, end)<br>取正值时表示从索引为start的位置截取到end的位置(不包括end所在位置的字符，如果end省略则截取到字符串末尾）<br>取负值时表示从索引为 length+start 位置截取到end所在位置的字符</p>
<h4 id="substr"><a href="#substr" class="headerlink" title="substr"></a>substr</h4><p>返回字符串指定位置开始的指定数量的字符。</p>
<p>substr(fromIndex,length)           </p>
<p>start 表示开始截取字符的位置，可取正值或负值。取正值时表示start位置的索引，取负值时表示 length+start位置的索引。</p>
<p>length 表示截取的字符长度。</p>
<h4 id="trim"><a href="#trim" class="headerlink" title="trim"></a>trim</h4><p>trim()去除空白<br>只能去除字符串前后的空白，字符之间的空格不能去掉</p>
<h4 id="toLocaleUpperCase"><a href="#toLocaleUpperCase" class="headerlink" title="toLocaleUpperCase"></a><strong>toLocaleUpperCase</strong></h4><p>toLocaleLowerCase() 方法返回调用该方法的字符串被转换成小写的值，转换规则根据本地化的大小写映射toLocaleUpperCase() 方法则是转换成大写的值。</p>
<p>语法：<em>str.toLocaleLowerCase()</em>, <em>str.toLocaleUpperCase()</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.log(&#x27;ABCDEFG&#x27;.toLocaleLowerCase()); // abcdefg</span><br><span class="line">console.log(&#x27;abcdefg&#x27;.toLocaleUpperCase()); // ABCDEFG</span><br></pre></td></tr></table></figure>

<h4 id="split"><a href="#split" class="headerlink" title="split"></a>split</h4><p>split()字符转换为数组 split()还可以结合正则表达式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str=<span class="string">&#x27;a,b,c,d&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> arr=str.split(<span class="string">&#x27;,&#x27;</span>);<span class="comment">//以逗号为分割成数组</span></span><br><span class="line">arr.join(<span class="string">&#x27;&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="includes-ES6"><a href="#includes-ES6" class="headerlink" title="includes(ES6)"></a>includes(ES6)</h4><p>includes() 方法基于<strong>ECMAScript 2015（ES6）规范</strong>，它用来判断一个字符串是否属于另一个字符。如果是，则返回true，否则返回false。</p>
<p>语法：<em>str.includes(subString [, position])</em></p>
<p>subString 表示要搜索的字符串，position 表示从当前字符串的哪个位置开始搜索字符串，默认值为0。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Practice makes perfect.&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">&quot;perfect&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.includes(<span class="string">&quot;perfect&quot;</span>,<span class="number">100</span>)); </span><br></pre></td></tr></table></figure>

<h4 id="endsWith-ES6"><a href="#endsWith-ES6" class="headerlink" title="endsWith(ES6)"></a>endsWith(ES6)</h4><p>endsWith() 方法基于<strong>ECMAScript 2015（ES6）规范</strong>，它基本与 contains() 功能相同，不同的是，它用来判断一个字符串是否是原字符串的结尾。若是则返回true，否则返回false。</p>
<p>语法：<em>str.endsWith(substring [, position])</em></p>
<p>与contains 方法不同，position 参数的默认值为字符串长度。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str = <span class="string">&quot;Learn and live.&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">&quot;live.&quot;</span>)); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(str.endsWith(<span class="string">&quot;Learn&quot;</span>,<span class="number">5</span>)); </span><br></pre></td></tr></table></figure>

<p>startsWith() 方法基于<strong>ECMAScript 2015（ES6）规范</strong>，它用来判断当前字符串是否是以给定字符串开始的，若是则返回true，否则返回false。</p>
<p>语法：<em>str.startsWith(subString [, position])</em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var str = &quot;Where there is a will, there is a way.&quot;;</span><br><span class="line">console.log(str.startsWith(&quot;Where&quot;)); // true</span><br><span class="line">console.log(str.startsWith(&quot;there&quot;,6)); </span><br></pre></td></tr></table></figure>

<h4 id="实战-2"><a href="#实战-2" class="headerlink" title="实战"></a>实战</h4><h5 id="找到第一个不重复的字符，并返回它的索引"><a href="#找到第一个不重复的字符，并返回它的索引" class="headerlink" title="找到第一个不重复的字符，并返回它的索引"></a>找到第一个不重复的字符，并返回它的索引</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> firstUniqChar = <span class="function">(<span class="params">s</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> position = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> s) &#123;</span><br><span class="line">    <span class="keyword">if</span> (position.has(i)) &#123;</span><br><span class="line">      position.set(i, position.get(i) + <span class="number">1</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      position.set(i, <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; s.length; i++) &#123;  </span><br><span class="line">    <span class="keyword">if</span> (position.get(s[i]) === <span class="number">1</span>) </span><br><span class="line">      <span class="keyword">return</span> i</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//s = &quot;leetcode&quot;</span></span><br><span class="line">返回 <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//s = &quot;loveleetcode&quot;</span></span><br><span class="line">返回 <span class="number">2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><h4 id="会改变原来数组的有："><a href="#会改变原来数组的有：" class="headerlink" title="会改变原来数组的有："></a>会改变原来数组的有：</h4><h5 id="pop"><a href="#pop" class="headerlink" title="pop()"></a>pop()</h5><p>删除数组的最后一个元素并返回删除的元素。</p>
<h5 id="push"><a href="#push" class="headerlink" title="push()"></a>push()</h5><p>向数组的末尾添加一个或更多元素，并返回新的长度。</p>
<h5 id="shift"><a href="#shift" class="headerlink" title="shift()"></a>shift()</h5><p>删除并返回数组的第一个元素。</p>
<h5 id="unshift"><a href="#unshift" class="headerlink" title="unshift()"></a>unshift()</h5><p>向数组的开头添加一个或更多元素，并返回新的长度。reverse()—反转数组的元素顺序。</p>
<h5 id="reverse"><a href="#reverse" class="headerlink" title="reverse()"></a>reverse()</h5><p>翻转数组</p>
<h5 id="sort"><a href="#sort" class="headerlink" title="sort()"></a>sort()</h5><p><em>arr.sort([comparefn])</em></p>
<ul>
<li><p>comparefn是可选的，如果省略，数组元素将按照各自转换为字符串的Unicode(万国码)位点顺序排序</p>
</li>
<li><p>如果指明了comparefn，数组将按照调用该函数的返回值来排序。若 a 和 b 是两个将要比较的元素：</p>
<ul>
<li>若 comparefn(a, b) &lt; 0，那么a 将排到 b 前面；</li>
<li>若 comparefn(a, b) = 0，那么a 和 b 相对位置不变；</li>
<li>若 comparefn(a, b) &gt; 0，那么a , b 将调换位置；</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//即使是数组sort也是根据字符，从小到大排序</span></span><br><span class="line"><span class="comment">//采用冒泡排序</span></span><br><span class="line">sort(<span class="function"><span class="title">fn</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line"><span class="comment">// 升序</span></span><br><span class="line"><span class="keyword">return</span> a - b;</span><br><span class="line"><span class="comment">// 倒序</span></span><br><span class="line"><span class="keyword">return</span> b - a;</span><br><span class="line">&#125;)</span><br><span class="line">fn（a,b）&#123;<span class="keyword">return</span> <span class="xml">&lt;0||&gt;0&#125;,返回小于0升序，大于0降序。</span></span><br><span class="line"><span class="xml"></span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = [<span class="number">2</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">0</span>].sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a,b)</span><br><span class="line">    <span class="keyword">return</span> a-b</span><br><span class="line">&#125;)</span><br><span class="line">:<span class="number">3</span> <span class="number">2</span></span><br><span class="line">:<span class="number">1</span> <span class="number">3</span> </span><br><span class="line">:<span class="number">1</span> <span class="number">3</span> </span><br><span class="line">:<span class="number">1</span> <span class="number">2</span> </span><br><span class="line">:<span class="number">0</span> <span class="number">2</span></span><br><span class="line">:<span class="number">0</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><strong>sort()方法的比较逻辑为：</strong><br>前一半的数组进行比较，并排好序，后一半数组再与前面排序好的数组的中间一个值比较（二分法，判断是与前面还是后面的数组比较，更快），并排序</p>
<h5 id="splice"><a href="#splice" class="headerlink" title="splice()"></a>splice()</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array.splice(index, howmany, item1, ....., itemX)</span><br></pre></td></tr></table></figure>

<p>参数值</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><em>index</em></td>
<td align="left">必需。整数，指定在什么位置添加/删除项目，使用负值指定从数组末尾开始的位置。</td>
</tr>
<tr>
<td align="left"><em>howmany</em></td>
<td align="left">可选。要删除的项目数。如果设置为 0，则不会删除任何项目。</td>
</tr>
<tr>
<td align="left"><em>item1, …, itemX</em></td>
<td align="left">可选。要添加到数组中的新项目。</td>
</tr>
</tbody></table>
<p>arr.splice(start,deleteCount[, item1[, item2[, …]]])</p>
<p><strong>删除</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="string">&quot;apple&quot;</span>,<span class="string">&quot;boy&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> splices = array.splice(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(array); <span class="comment">// [&quot;apple&quot;]</span></span><br><span class="line"><span class="built_in">console</span>.log(splices); <span class="comment">// [&quot;boy&quot;] ,可见是从数组下标为1的元素开始删除,并且删除一个元素,由于itemN缺省,故此时该方法只删除元素</span></span><br></pre></td></tr></table></figure>

<p><strong>插入</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;four&quot;</span>];</span><br><span class="line">array.splice(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&quot;three&quot;</span>); <span class="comment">// </span></span><br><span class="line">array; <span class="comment">//[&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.prototype.insert = <span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">this</span>.splice(index, <span class="number">0</span>, item);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> nums = [<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;four&quot;</span>];</span><br><span class="line">nums.insert(<span class="number">2</span>, <span class="string">&#x27;three&#x27;</span>); <span class="comment">// 注意数组索引, [0,1,2..]</span></span><br><span class="line">array <span class="comment">// [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;, &quot;four&quot;]</span></span><br></pre></td></tr></table></figure>

<h4 id="不会改变原来数组的有："><a href="#不会改变原来数组的有：" class="headerlink" title="不会改变原来数组的有："></a>不会改变原来数组的有：</h4><h5 id="indexOf和lastIndexOf"><a href="#indexOf和lastIndexOf" class="headerlink" title="indexOf和lastIndexOf"></a>indexOf和lastIndexOf</h5><p>indexOf(arr[i],[index] ) 从位置index查找arr[i]在数组中的位置，只找第一个匹配的，如果不存在，则返回-1。</p>
<h5 id="concat-1"><a href="#concat-1" class="headerlink" title="concat()"></a>concat()</h5><p>将传入的数组或者元素与原数组合并，组成一个新的数组并返回。</p>
<p>语法：<em><strong>arr.concat(value1, value2, …, valueN)</strong></em></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var array = [1, 2, 3];</span><br><span class="line">var array2 = array.concat(4,[5,6],[7,8,9]);</span><br><span class="line">console.log(array2); // [1, 2, 3, 4, 5, 6, 7, 8, 9]</span><br><span class="line">console.log(array); // [1, 2, 3], 可见原数组并未被修改</span><br></pre></td></tr></table></figure>

<p>若concat方法中不传入参数，那么将基于原数组<strong>浅复制</strong>生成一个一模一样的新数组（指向新的地址空间）。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [&#123;<span class="attr">a</span>: <span class="number">1</span>&#125;];</span><br><span class="line"><span class="keyword">var</span> array3 = array.concat();</span><br><span class="line"><span class="built_in">console</span>.log(array3); <span class="comment">// [&#123;a: 1&#125;]</span></span><br><span class="line"><span class="built_in">console</span>.log(array3 === array); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(array[<span class="number">0</span>] === array3[<span class="number">0</span>]); <span class="comment">// true，新旧数组第一个元素依旧共用一个同一个对象的引用</span></span><br></pre></td></tr></table></figure>

<h5 id="join"><a href="#join" class="headerlink" title="join()"></a>join()</h5><p>将数组中的所有元素连接成一个字符串。</p>
<p>语法：<em>arr.join([separator = ‘,’])</em> separator可选，缺省默认为逗号。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var array = [&#x27;We&#x27;, &#x27;are&#x27;, &#x27;Chinese&#x27;];</span><br><span class="line">console.log(array.join()); // &quot;We,are,Chinese&quot;</span><br><span class="line">console.log(array.join(&#x27;+&#x27;)); // &quot;We+are+Chinese&quot;</span><br><span class="line">console.log(array.join(&#x27;&#x27;)); // &quot;WeareChinese&quot;</span><br></pre></td></tr></table></figure>

<h5 id="slice-1"><a href="#slice-1" class="headerlink" title="slice()"></a>slice()</h5><p>将数组中一部分元素浅复制存入新的数组对象，并且返回这个数组对象。</p>
<p>语法：<em>arr.slice([start[, end]])</em></p>
<p>参数 start 指定复制开始位置的索引，end如果有值则表示复制结束位置的索引（不包括此位置）。</p>
<p>如果 start 的值为负数，假如数组长度为 length，则表示从 length+start 的位置开始复制，此时参数 end 如果有值，只能是比 start 大的负数，否则将返回空数组。</p>
<p>slice方法参数为空时，同concat方法一样，都是浅复制生成一个新数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>,<span class="string">&quot;four&quot;</span>, <span class="string">&quot;five&quot;</span>];</span><br><span class="line"><span class="built_in">console</span>.log(array.slice()); <span class="comment">// [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;,&quot;four&quot;, &quot;five&quot;]</span></span><br><span class="line"><span class="built_in">console</span>.log(array.slice(<span class="number">2</span>,<span class="number">3</span>)); <span class="comment">// [&quot;three&quot;]</span></span><br><span class="line"><span class="built_in">console</span>.log(array); <span class="comment">// [&quot;one&quot;, &quot;two&quot;, &quot;three&quot;,&quot;four&quot;, &quot;five&quot;]</span></span><br></pre></td></tr></table></figure>

<p><strong>浅复制</strong> 是指当对象的被复制时，只是复制了对象的引用，指向的依然是同一个对象。下面来说明slice为什么是浅复制。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [&#123;<span class="attr">color</span>:<span class="string">&quot;yellow&quot;</span>&#125;, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">var</span> array2 = array.slice(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(array2); <span class="comment">// [&#123;color:&quot;yellow&quot;&#125;]</span></span><br><span class="line">array[<span class="number">0</span>][<span class="string">&quot;color&quot;</span>] = <span class="string">&quot;blue&quot;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(array2); <span class="comment">// [&#123;color:&quot;bule&quot;&#125;]</span></span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>

<p>由于slice是浅复制，复制到的对象只是一个引用，改变原数组array的值，array2也随之改变。</p>
<h5 id="toString和toLocaleString"><a href="#toString和toLocaleString" class="headerlink" title="toString和toLocaleString"></a>toString和toLocaleString</h5><h4 id="ES6"><a href="#ES6" class="headerlink" title="ES6"></a>ES6</h4><h5 id="from"><a href="#from" class="headerlink" title="from"></a>from</h5><p><code>Array.from</code>方法用于将两类对象转为真正的数组：类似数组的对象（array-like object）和可遍历（<strong>iterable</strong>）的对象（包括ES6新增的数据结构Set和Map）。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arrayLike = &#123;</span><br><span class="line">    <span class="string">&#x27;0&#x27;</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;1&#x27;</span>: <span class="string">&#x27;b&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;2&#x27;</span>: <span class="string">&#x27;c&#x27;</span>,</span><br><span class="line">    <span class="attr">length</span>: <span class="number">3</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES5的写法</span></span><br><span class="line"><span class="keyword">var</span> arr1 = [].slice.call(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6的写法</span></span><br><span class="line"><span class="keyword">let</span> arr2 = <span class="built_in">Array</span>.from(arrayLike); <span class="comment">// [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure>

<p>实际应用中，常见的类似数组的对象是DOM操作返回的NodeList集合，以及函数内部的<code>arguments</code>对象。<code>Array.from</code>都可以将它们转为真正的数组。</p>
<p>只要是部署了<strong>Iterator</strong>接口的数据结构，<code>Array.from</code>都能将其转为数组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">c</span><br><span class="line">// [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;]</span><br><span class="line"></span><br><span class="line">let namesSet = new Set([&#x27;a&#x27;, &#x27;b&#x27;])</span><br><span class="line">Array.from(namesSet) // [&#x27;a&#x27;, &#x27;b&#x27;]</span><br></pre></td></tr></table></figure>

<p>值得提醒的是，扩展运算符（…）也可以将某些数据结构转为数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// arguments对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = [...arguments];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NodeList对象</span></span><br><span class="line">[...document.querySelectorAll(<span class="string">&#x27;div&#x27;</span>)]</span><br></pre></td></tr></table></figure>

<p>扩展运算符背后调用的是遍历器接口（<code>Symbol.iterator</code>），如果一个对象没有部署这个接口，就无法转换。<code>Array.from</code>方法则是还支持类似数组的对象。所谓类似数组的对象，本质特征只有一点，即必须有<code>length</code>属性。因此，任何有<code>length</code>属性的对象，都可以通过<code>Array.from</code>方法转为数组，而此时扩展运算符就无法转换。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(&#123; <span class="attr">length</span>: <span class="number">3</span> &#125;);</span><br><span class="line"><span class="comment">// [ undefined, undefined, undefined ]</span></span><br></pre></td></tr></table></figure>

<p><code>Array.from</code>还可以接受第二个参数，作用类似于数组的<code>map</code>方法，用来对每个元素进行处理，将处理后的值放入返回的数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from(arrayLike, <span class="function"><span class="params">x</span> =&gt;</span> x * x);</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="built_in">Array</span>.from(arrayLike).map(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.from([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function">(<span class="params">x</span>) =&gt;</span> x * x)</span><br><span class="line"><span class="comment">// [1, 4, 9]</span></span><br></pre></td></tr></table></figure>

<p>下面的例子是取出一组DOM节点的文本内容。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> spans = <span class="built_in">document</span>.querySelectorAll(<span class="string">&#x27;span.name&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// map()</span></span><br><span class="line"><span class="keyword">let</span> names1 = <span class="built_in">Array</span>.prototype.map.call(spans, <span class="function"><span class="params">s</span> =&gt;</span> s.textContent);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Array.from()</span></span><br><span class="line"><span class="keyword">let</span> names2 = <span class="built_in">Array</span>.from(spans, <span class="function"><span class="params">s</span> =&gt;</span> s.textContent)</span><br></pre></td></tr></table></figure>

<h5 id="Array-of"><a href="#Array-of" class="headerlink" title="Array.of"></a>Array.of</h5><p><code>Array.of</code>方法用于将一组值，转换为数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>) <span class="comment">// [3,11,8]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>) <span class="comment">// [3]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>).length <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>这个方法的主要目的，是弥补数组构造函数<code>Array()</code>的不足。因为参数个数的不同，会导致<code>Array()</code>的行为有差异。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>() <span class="comment">// []</span></span><br><span class="line"><span class="comment">//参数个数只有一个时，实际上是指定数组的长度。</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>) <span class="comment">// [, , ,]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>, <span class="number">11</span>, <span class="number">8</span>) <span class="comment">// [3, 11, 8]</span></span><br></pre></td></tr></table></figure>

<p><code>Array.of</code>基本上可以用来替代<code>Array()</code>或<code>new Array()</code>，并且不存在由于参数不同而导致的重载。它的行为非常统一。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.of() <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="literal">undefined</span>) <span class="comment">// [undefined]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>) <span class="comment">// [1]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// [1, 2]</span></span><br></pre></td></tr></table></figure>

<h5 id="copyWithin"><a href="#copyWithin" class="headerlink" title="copyWithin"></a>copyWithin</h5><p>数组实例的<code>copyWithin</code>方法，在当前数组内部，将指定位置的成员复制到其他位置（会覆盖原有成员），然后返回当前数组。也就是说，使用这个方法，会修改当前数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.copyWithin(target, start = <span class="number">0</span>, end = <span class="built_in">this</span>.length)</span><br></pre></td></tr></table></figure>

<p>它接受三个参数。</p>
<ul>
<li>target（必需）：从该位置开始替换数据。</li>
<li>start（可选）：从该位置开始读取数据，默认为0。如果为负值，表示倒数。</li>
<li>end（可选）：到该位置前停止读取数据，默认等于数组长度。如果为负值，表示倒数。</li>
</ul>
<p>这三个参数都应该是数值，如果不是，会自动转为数值。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// [4, 5, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<p>上面代码表示将从3号位直到数组结束的成员（4和5），复制到从0号位开始的位置，结果覆盖了原来的1和2。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将3号位复制到0号位</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment">// [4, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>

<h5 id="find和findIndex"><a href="#find和findIndex" class="headerlink" title="find和findIndex"></a>find和findIndex</h5><p>数组实例的<code>find</code>方法，用于找出第一个符合条件的数组成员。它的参数是一个回调函数，所有数组成员依次执行该回调函数，直到找出<strong>第一个</strong>返回值为<code>true</code>的成员，然后<strong>返回该成员</strong>。如果没有符合条件的成员，则返回<code>undefined</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">4</span>, -<span class="number">5</span>, <span class="number">10</span>].find(<span class="function">(<span class="params">n</span>) =&gt;</span> n &lt; <span class="number">0</span>)</span><br><span class="line"><span class="comment">// -5</span></span><br></pre></td></tr></table></figure>

<p>上面代码找出数组中第一个小于0的成员。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>].find(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">9</span>;</span><br><span class="line">&#125;) <span class="comment">// 10</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>find</code>方法的回调函数可以接受三个参数，依次为当前的值、当前的位置和原数组。</p>
<p>数组实例的<code>findIndex</code>方法的用法与<code>find</code>方法非常类似，<strong>返回第一个符合条件的数组成员的位置</strong>，如果所有成员都不符合条件，则返回<code>-1</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>, <span class="number">15</span>].findIndex(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt; <span class="number">9</span>;</span><br><span class="line">&#125;) <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>

<p>另外，这两个方法都可以发现<code>NaN</code>，弥补了数组的<code>IndexOf</code>方法的不足。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="literal">NaN</span>].indexOf(<span class="literal">NaN</span>)</span><br><span class="line"><span class="comment">// -1</span></span><br><span class="line"></span><br><span class="line">[<span class="literal">NaN</span>].findIndex(<span class="function"><span class="params">y</span> =&gt;</span> <span class="built_in">Object</span>.is(<span class="literal">NaN</span>, y))</span><br><span class="line"><span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>indexOf</code>方法无法识别数组的<code>NaN</code>成员，但是<code>findIndex</code>方法可以借助<code>Object.is</code>方法做到。</p>
<h5 id="fill"><a href="#fill" class="headerlink" title="fill()"></a>fill()</h5><p><code>fill</code>方法使用给定值，填充一个数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>].fill(<span class="number">7</span>)</span><br><span class="line"><span class="comment">// [7, 7, 7]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="number">7</span>)</span><br><span class="line"><span class="comment">// [7, 7, 7]</span></span><br></pre></td></tr></table></figure>

<p>上面代码表明，<code>fill</code>方法用于空数组的初始化非常方便。</p>
<h5 id="entries和keys和values"><a href="#entries和keys和values" class="headerlink" title="entries和keys和values"></a>entries和keys和values</h5><p>ES6提供三个新的方法——<code>entries()</code>，<code>keys()</code>和<code>values()</code>——用于遍历数组。它们都返回一个遍历器对象（详见《Iterator》一章），可以用<code>for...of</code>循环进行遍历，唯一的区别是<code>keys()</code>是对键名的遍历、<code>values()</code>是对键值的遍历，<code>entries()</code>是对键值对的遍历。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> index <span class="keyword">of</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>].keys()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> elem <span class="keyword">of</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>].values()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// &#x27;a&#x27;</span></span><br><span class="line"><span class="comment">// &#x27;b&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> [index, elem] <span class="keyword">of</span> [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>].entries()) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index, elem);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0 &quot;a&quot;</span></span><br><span class="line"><span class="comment">// 1 &quot;b&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果不使用<code>for...of</code>循环，可以手动调用遍历器对象的<code>next</code>方法，进行遍历。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> letter = [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> entries = letter.entries();</span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [0, &#x27;a&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [1, &#x27;b&#x27;]</span></span><br><span class="line"><span class="built_in">console</span>.log(entries.next().value); <span class="comment">// [2, &#x27;c&#x27;]</span></span><br></pre></td></tr></table></figure>

<h5 id="includes"><a href="#includes" class="headerlink" title="includes()"></a>includes()</h5><p><code>Array.prototype.includes</code>方法返回一个布尔值，表示某个数组是否包含给定的值，与字符串的<code>includes</code>方法类似。该方法属于ES7，但Babel转码器已经支持。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">2</span>);     <span class="comment">// true</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].includes(<span class="number">4</span>);     <span class="comment">// false</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="literal">NaN</span>].includes(<span class="literal">NaN</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;a:1&#125;,2,3,&#123;b:2&#125;].includes(&#123;a:1&#125;)//false</span><br></pre></td></tr></table></figure>

<h5 id="数组的空位"><a href="#数组的空位" class="headerlink" title="数组的空位"></a>数组的空位</h5><p>数组的空位指，数组的某一个位置没有任何值。比如，<code>Array</code>构造函数返回的数组都是空位。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>) <span class="comment">// [, , ,]</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>Array(3)</code>返回一个具有3个空位的数组。</p>
<p>注意，空位不是<code>undefined</code>，一个位置的值等于<code>undefined</code>，依然是有值的。空位是没有任何值，<code>in</code>运算符可以说明这一点。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="keyword">in</span> [<span class="literal">undefined</span>, <span class="literal">undefined</span>, <span class="literal">undefined</span>] <span class="comment">// true</span></span><br><span class="line"><span class="number">0</span> <span class="keyword">in</span> [, , ,] <span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p>上面代码说明，第一个数组的0号位置是有值的，第二个数组的0号位置没有值。</p>
<p>ES5对空位的处理，已经很不一致了，大多数情况下会忽略空位。</p>
<ul>
<li><code>forEach()</code>, <code>filter()</code>, <code>every()</code> 和<code>some()</code>都会跳过空位。</li>
<li><code>map()</code>会跳过空位，但会保留这个值</li>
<li><code>join()</code>和<code>toString()</code>会将空位视为<code>undefined</code>，而<code>undefined</code>和<code>null</code>会被处理成空字符串。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// forEach方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].forEach(<span class="function">(<span class="params">x,i</span>) =&gt;</span> <span class="built_in">console</span>.log(i)); <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// filter方法</span></span><br><span class="line">[<span class="string">&#x27;a&#x27;</span>,,<span class="string">&#x27;b&#x27;</span>].filter(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// [&#x27;a&#x27;,&#x27;b&#x27;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// every方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].every(<span class="function"><span class="params">x</span> =&gt;</span> x===<span class="string">&#x27;a&#x27;</span>) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// some方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].some(<span class="function"><span class="params">x</span> =&gt;</span> x !== <span class="string">&#x27;a&#x27;</span>) <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// map方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].map(<span class="function"><span class="params">x</span> =&gt;</span> <span class="number">1</span>) <span class="comment">// [,1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// join方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>,<span class="literal">undefined</span>,<span class="literal">null</span>].join(<span class="string">&#x27;#&#x27;</span>) <span class="comment">// &quot;#a##&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// toString方法</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>,<span class="literal">undefined</span>,<span class="literal">null</span>].toString() <span class="comment">// &quot;,a,,&quot;</span></span><br></pre></td></tr></table></figure>

<p>ES6则是明确将空位转为<code>undefined</code>。</p>
<p><code>Array.from</code>方法会将数组的空位，转为<code>undefined</code>，也就是说，这个方法不会忽略空位。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.from([<span class="string">&#x27;a&#x27;</span>,,<span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"><span class="comment">// [ &quot;a&quot;, undefined, &quot;b&quot; ]</span></span><br></pre></td></tr></table></figure>

<p>扩展运算符（<code>...</code>）也会将空位转为<code>undefined</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[...[<span class="string">&#x27;a&#x27;</span>,,<span class="string">&#x27;b&#x27;</span>]]</span><br><span class="line"><span class="comment">// [ &quot;a&quot;, undefined, &quot;b&quot; ]</span></span><br></pre></td></tr></table></figure>

<p><code>copyWithin()</code>会连空位一起拷贝。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,,].copyWithin(<span class="number">2</span>,<span class="number">0</span>) <span class="comment">// [,&quot;a&quot;,,&quot;a&quot;]</span></span><br></pre></td></tr></table></figure>

<p><code>fill()</code>会将空位视为正常的数组位置。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">3</span>).fill(<span class="string">&#x27;a&#x27;</span>) <span class="comment">// [&quot;a&quot;,&quot;a&quot;,&quot;a&quot;]</span></span><br></pre></td></tr></table></figure>

<p><code>for...of</code>循环也会遍历空位。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [, ,];</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>上面代码中，数组<code>arr</code>有两个空位，<code>for...of</code>并没有忽略它们。如果改成<code>map</code>方法遍历，空位是会跳过的。</p>
<p><code>entries()</code>、<code>keys()</code>、<code>values()</code>、<code>find()</code>和<code>findIndex()</code>会将空位处理成<code>undefined</code>。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// entries()</span></span><br><span class="line">[...[,<span class="string">&#x27;a&#x27;</span>].entries()] <span class="comment">// [[0,undefined], [1,&quot;a&quot;]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// keys()</span></span><br><span class="line">[...[,<span class="string">&#x27;a&#x27;</span>].keys()] <span class="comment">// [0,1]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// values()</span></span><br><span class="line">[...[,<span class="string">&#x27;a&#x27;</span>].values()] <span class="comment">// [undefined,&quot;a&quot;]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// find()</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].find(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// findIndex()</span></span><br><span class="line">[,<span class="string">&#x27;a&#x27;</span>].findIndex(<span class="function"><span class="params">x</span> =&gt;</span> <span class="literal">true</span>) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<p>由于空位的处理规则非常不统一，所以建议避免出现空位。</p>
<h4 id="实战-3"><a href="#实战-3" class="headerlink" title="实战"></a>实战</h4><h5 id="根据数组长度创建一个一样长度的数组并初始化值为0"><a href="#根据数组长度创建一个一样长度的数组并初始化值为0" class="headerlink" title="根据数组长度创建一个一样长度的数组并初始化值为0"></a>根据数组长度创建一个一样长度的数组并初始化值为0</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const arr = new Array(5).fill(0)</span><br></pre></td></tr></table></figure>

<h5 id="选择一个随机值"><a href="#选择一个随机值" class="headerlink" title="选择一个随机值"></a>选择一个随机值</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const random = (arr) =&gt; arr[Math.floor(Math.random() * arr.length)]</span><br><span class="line">random([1, 2, 3, 4, 5, 6])</span><br></pre></td></tr></table></figure>

<h5 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h5><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/90017508">https://zhuanlan.zhihu.com/p/90017508</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">removeDuplicate</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>]))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  indexOf：从左往右查找目标字符串，是否包含 Value;</span></span><br><span class="line"><span class="comment">           如果包含，返回第一次出现的索引;</span></span><br><span class="line"><span class="comment">           如果不包含，返回 -1</span></span><br><span class="line"><span class="comment">  indexOf 和 lastIndexOf() 方法一样</span></span><br><span class="line"><span class="comment">  步骤：</span></span><br><span class="line"><span class="comment">  1. 先声明一个空数组，用来存放去重后的数据</span></span><br><span class="line"><span class="comment">  2. 遍历数组，判断每一项</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;one&#x27;</span>,<span class="string">&#x27;two&#x27;</span>,<span class="string">&#x27;three&#x27;</span>,<span class="string">&#x27;one&#x27;</span>,<span class="string">&#x27;three&#x27;</span>,<span class="string">&#x27;two&#x27;</span>,<span class="string">&#x27;four&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> indexArr = [];</span><br><span class="line">arr.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">   <span class="keyword">if</span>(indexArr.indexOf(item)===-<span class="number">1</span>)&#123;</span><br><span class="line">      indexArr.push(item);</span><br><span class="line">   &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(indexArr); <span class="comment">// [&#x27;one&#x27;,&#x27;two&#x27;,&#x27;three&#x27;,&#x27;four&#x27;];</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="string">&#x27;one&#x27;</span>,<span class="string">&#x27;two&#x27;</span>,<span class="string">&#x27;three&#x27;</span>,<span class="string">&#x27;one&#x27;</span>,<span class="string">&#x27;three&#x27;</span>,<span class="string">&#x27;two&#x27;</span>,<span class="string">&#x27;four&#x27;</span>];</span><br><span class="line"><span class="keyword">let</span> el = arr.filter(<span class="function">(<span class="params">item,index</span>)=&gt;</span>arr.indexOf(item)===index);</span><br><span class="line"><span class="built_in">console</span>.log(el); <span class="comment">// [&#x27;one&#x27;,&#x27;two&#x27;,&#x27;three&#x27;,&#x27;four&#x27;];</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* </span></span><br><span class="line"><span class="comment">   1. 和上面方法一致，只不过是使用了 forEach</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">&#x27;one&#x27;</span>,<span class="string">&#x27;two&#x27;</span>,<span class="string">&#x27;three&#x27;</span>,<span class="string">&#x27;one&#x27;</span>,<span class="string">&#x27;three&#x27;</span>,<span class="string">&#x27;two&#x27;</span>,<span class="string">&#x27;four&#x27;</span>];</span><br><span class="line"><span class="keyword">var</span> obj = &#123;&#125;;</span><br><span class="line">arr.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">ele,index,arr</span>)</span>&#123;</span><br><span class="line">    obj[arr[index]] = arr[index];</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> el =  <span class="built_in">Object</span>.keys(obj);</span><br><span class="line"><span class="built_in">console</span>.log(el) <span class="comment">// [&#x27;one&#x27;,&#x27;two&#x27;,&#x27;three&#x27;,&#x27;four&#x27;];</span></span><br></pre></td></tr></table></figure>

<h5 id="数组中最大元素的下标"><a href="#数组中最大元素的下标" class="headerlink" title="数组中最大元素的下标"></a>数组中最大元素的下标</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">maxValIndex</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> max=<span class="built_in">Math</span>.max(...arr);</span><br><span class="line">  <span class="keyword">var</span> index = arr.map(<span class="function"><span class="params">item</span> =&gt;</span> item).indexOf(max);</span><br><span class="line">  <span class="keyword">return</span> index</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="找出数组中出现最多的元素和次数"><a href="#找出数组中出现最多的元素和次数" class="headerlink" title="找出数组中出现最多的元素和次数"></a>找出数组中出现最多的元素和次数</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMost</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!arr.length) <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> (arr.length === <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">let</span> res = &#123;&#125;</span><br><span class="line">    <span class="keyword">let</span> maxName, maxNum = <span class="number">0</span></span><br><span class="line">    <span class="comment">// 遍历数组</span></span><br><span class="line">    arr.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">      res[item] ? res[item] += <span class="number">1</span> : res[item] = <span class="number">1</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 遍历 res</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> r <span class="keyword">in</span> res) &#123;</span><br><span class="line">      <span class="keyword">if</span> (res[r] &gt; maxNum) &#123;</span><br><span class="line">        maxNum = res[r]</span><br><span class="line">        maxName = r</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;出现次数最多的元素为:&#x27;</span> + maxName + <span class="string">&#x27;, 出现次数为:&#x27;</span> + maxNum;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMost</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!arr.length) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (arr.length === <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> res = &#123;&#125;;</span><br><span class="line">  <span class="keyword">let</span> maxName, maxNum = <span class="number">0</span></span><br><span class="line">  <span class="comment">// 遍历数组</span></span><br><span class="line">  arr.forEach(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    res[item] ? res[item] += <span class="number">1</span> : res[item] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> (res[item] &gt; maxNum) &#123;</span><br><span class="line">      maxName = item</span><br><span class="line">      maxNum = res[item]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;出现次数最多的元素为:&#x27;</span> + maxName + <span class="string">&#x27;, 出现次数为:&#x27;</span> + maxNum;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findMost</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!arr.length) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">if</span> (arr.length === <span class="number">1</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">let</span> maxName, maxNum = <span class="number">0</span></span><br><span class="line">  <span class="keyword">let</span> res = arr.reduce(<span class="function">(<span class="params">res, currentNum</span>) =&gt;</span> &#123;</span><br><span class="line">    res[currentNum] ? res[currentNum] += <span class="number">1</span> : res[currentNum] = <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> (res[currentNum] &gt; maxNum) &#123;</span><br><span class="line">      maxNum = res[currentNum]</span><br><span class="line">      maxName = currentNum</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">  &#125;, &#123;&#125;)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;出现次数最多的元素为:&#x27;</span> + maxName + <span class="string">&#x27;, 出现次数为:&#x27;</span> + maxNum;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">const</span> str = <span class="string">&#x27;jshdjsihh&#x27;</span>;</span><br><span class="line">     <span class="keyword">const</span> obj = str.split(<span class="string">&#x27;&#x27;</span>).reduce(<span class="function">(<span class="params">pre,item</span>) =&gt;</span> &#123;</span><br><span class="line">         pre[item] ? pre[item] ++ : pre[item] = <span class="number">1</span></span><br><span class="line">         <span class="keyword">return</span> pre</span><br><span class="line">     &#125;,&#123;&#125;)</span><br><span class="line"> <span class="built_in">console</span>.log(obj) <span class="comment">// &#123;j: 2, s: 2, h: 3, d: 1, i: 1&#125;</span></span><br></pre></td></tr></table></figure>

<h5 id="数组对象"><a href="#数组对象" class="headerlink" title="数组对象"></a>数组对象</h5><h6 id="数组对象去重"><a href="#数组对象去重" class="headerlink" title="数组对象去重"></a>数组对象去重</h6><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tempArr1 = tempArr1.filter(<span class="function">(<span class="params">item,index</span>) =&gt;</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> tempArr1.findIndex(<span class="function"><span class="params">item1</span> =&gt;</span>item1.id==item.id) == index</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h6 id="判断两个数组对象是否相等"><a href="#判断两个数组对象是否相等" class="headerlink" title="判断两个数组对象是否相等"></a>判断两个数组对象是否相等</h6><h2 id="遍历"><a href="#遍历" class="headerlink" title="遍历"></a>遍历</h2><h3 id="数组-1"><a href="#数组-1" class="headerlink" title="数组"></a>数组</h3><p><strong>迭代方法 不会修改原数组</strong></p>
<p>every()、filter()、forEach()、map()、some()</p>
<h4 id="forEach"><a href="#forEach" class="headerlink" title="forEach()"></a>forEach()</h4><p>指定数组的每项元素都执行一次传入的函数，返回值为undefined。</p>
<p>语法：<strong>arr.forEach(fn, thisArg)</strong></p>
<p>fn 表示在数组每一项上执行的函数，接受三个参数：</p>
<ul>
<li>value 当前正在被处理的元素的值</li>
<li>index 当前元素的数组索引</li>
<li>array 数组本身</li>
</ul>
<p>thisArg 可选，用来当做fn函数内的this对象。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>];</span><br><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>:<span class="string">&#x27;cc&#x27;</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> sReturn = array.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">value, index, array</span>)</span>&#123;</span><br><span class="line">  array[index] = value * value;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name); <span class="comment">// cc被打印了三次</span></span><br><span class="line">&#125;,obj);</span><br><span class="line"><span class="built_in">console</span>.log(array); <span class="comment">// [1, 9, 25], 可见原数组改变了</span></span><br><span class="line"><span class="built_in">console</span>.log(sReturn); <span class="comment">// undefined, 可见返回值为undefined</span></span><br></pre></td></tr></table></figure>

<h4 id="map"><a href="#map" class="headerlink" title="map()"></a>map()</h4><p>使用传入函数处理每个元素，并返回函数的返回值组成的新数组。</p>
<p>语法：<strong>arr.map(fn, thisArg)</strong></p>
<p>参数介绍同 forEach 方法的参数介绍。</p>
<h4 id="every"><a href="#every" class="headerlink" title="every()"></a>every()</h4><p>数组的每一项执行的函数都满足条件就返回true</p>
<h4 id="some"><a href="#some" class="headerlink" title="some()"></a>some()</h4><p>对数组的每一项运行给定函数，如果该函数对任一项返回true，则返回true。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>];</span><br><span class="line">list.some(<span class="function"><span class="params">item</span>=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(item)</span><br><span class="line">  <span class="keyword">if</span>(item===<span class="number">3</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">输出结果为<span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span></span><br></pre></td></tr></table></figure>

<p>es6中的some也可实现此功能。some循环中只要有一个符合条件则会跳出循环体</p>
<h4 id="filter"><a href="#filter" class="headerlink" title="filter()"></a>filter()</h4><p>执行函数过滤掉不符和条件的数组元素，返回复合条件的数组元素</p>
<p>语法：<strong>arr.filter(fn, thisArg)</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var array = [18, 9, 10, 35, 80];</span><br><span class="line">var array2 = array.filter(function(value, index, array)&#123;</span><br><span class="line">  return value &gt; 20;</span><br><span class="line">&#125;);</span><br><span class="line">console.log(array2); // [35, 80]</span><br></pre></td></tr></table></figure>

<p><code>0</code>，<code>undefined</code>，<code>null</code>，<code>false</code>，<code>&quot;&quot;</code>，<code>&#39;&#39;</code>可以很容易地通过以下方法省略</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> array = [<span class="number">3</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="string">&#x27;&#x27;</span>, <span class="literal">false</span>];</span><br><span class="line">array.filter(<span class="built_in">Boolean</span>);</span><br><span class="line"><span class="comment">// 输出</span></span><br><span class="line">(<span class="number">3</span>) [<span class="number">3</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br></pre></td></tr></table></figure>

<p>删除重复值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const array  = [5,4,7,8,9,2,7,5];</span><br><span class="line">array.filter((item,idx,arr) =&gt; arr.indexOf(item) === idx);</span><br></pre></td></tr></table></figure>

<h4 id="reduce"><a href="#reduce" class="headerlink" title="reduce()"></a>reduce()</h4><p>reduce() 方法接收一个方法作为累加器，数组中的每个值(从左至右) 开始合并，最终为一个值。</p>
<p>语法：<strong>array.reduce(function(total, currentValue, currentIndex, arr), initialValue)</strong></p>
<p><strong>参数</strong></p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><em>initialValue</em></td>
<td align="left">可选。<strong>传递给函数的初始值</strong></td>
</tr>
<tr>
<td align="left"><em>function(total,currentValue, index,arr)</em></td>
<td align="left">必需。用于执行每个数组元素的函数。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><em>total(累计器)</em></td>
<td align="left">必需。<em>初始值</em>, 或者计算结束后的返回值。</td>
</tr>
<tr>
<td align="left"><em>currentValue</em>(当前值)</td>
<td align="left">必需。当前元素</td>
</tr>
<tr>
<td align="left"><em>currentIndex(当前索引)</em></td>
<td align="left">可选。当前元素的索引</td>
</tr>
<tr>
<td align="left"><em>arr(源数组)</em></td>
<td align="left">可选。当前元素所属的数组对象。</td>
</tr>
</tbody></table>
<p><strong>代码</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].reduce(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123; <span class="comment">//不带初始值</span></span><br><span class="line">  <span class="keyword">return</span> acc + cur</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// 1 + 2 + 3 + 4</span></span><br><span class="line"><span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>].reduce(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123; <span class="comment">//带初始值</span></span><br><span class="line">  <span class="keyword">return</span> acc + cur</span><br><span class="line">&#125;, <span class="number">10</span>)</span><br><span class="line"><span class="comment">// 10 + 1 + 2 + 3 + 4</span></span><br><span class="line"><span class="comment">// 20</span></span><br></pre></td></tr></table></figure>

<p> <strong>初始值 <code>initialValue</code> 可以是任意类型。如果没有提供 <code>initialValue</code>，<code>reduce</code> 会从索引 1 的地方开始执行 <code>callback</code> 方法，跳过第一个索引。如果提供 <code>initialValue</code>，从索引 0 开始</strong></p>
<h4 id="entries"><a href="#entries" class="headerlink" title="entries()"></a>entries()</h4><p>方法基于<strong>ECMAScript 2015（ES6）规范</strong>，返回一个数组迭代器对象，该对象包含数组中每个索引的键值对。</p>
<p>语法：<strong>arr.entries()</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var array = [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];</span><br><span class="line">var iterator = array.entries();</span><br><span class="line">console.log(iterator.next()); //&#123; value: [ 0, &#x27;a&#x27; ], done: false &#125; </span><br><span class="line">console.log(iterator.next().value); // [0, &quot;a&quot;]</span><br><span class="line">console.log(iterator.next().value); // [1, &quot;b&quot;]</span><br><span class="line">console.log(iterator.next().value); // [2, &quot;c&quot;]</span><br><span class="line">console.log(iterator.next().value); // undefined, 迭代器处于数组末尾时, 再迭代就会返回undefined</span><br></pre></td></tr></table></figure>

<h4 id="keys"><a href="#keys" class="headerlink" title="keys"></a>keys</h4><p>keys() 方法基于ECMAScript 2015（ES6）规范，返回一个数组索引的迭代器。（浏览器实际实现可能会有调整）</p>
<p>语法：<strong>arr.keys()</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;xyz&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> iterator = array.keys();</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// Object &#123;value: 0, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// Object &#123;value: 1, done: false&#125;</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next()); <span class="comment">// Object &#123;value: undefined, done: false&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="values"><a href="#values" class="headerlink" title="values()"></a>values()</h4><p>values() 方法基于<strong>ECMAScript 2015（ES6）规范</strong>，返回一个数组迭代器对象，该对象包含数组中每个索引的值。其用法基本与上述 entries 方法一致。</p>
<p>语法：<strong>arr.values()</strong></p>
<p>遗憾的是，现在没有浏览器实现了该方法，因此下面将就着看看吧。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> array = [<span class="string">&quot;abc&quot;</span>, <span class="string">&quot;xyz&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> iterator = array.values();</span><br><span class="line"><span class="built_in">console</span>.log(iterator.next().value);<span class="comment">//abc</span></span><br><span class="line"><span class="built_in">console</span>.log(iterator.next().value);<span class="comment">//xyz</span></span><br></pre></td></tr></table></figure>

<h4 id="for"><a href="#for" class="headerlink" title="for"></a>for</h4><p><strong>for…in循环</strong></p>
<p>精准的迭代，可以迭代对象的元素。也可以迭代数组。</p>
<p>【注意】使用<code>for ... in</code>，迭代的是元素（keys），对于数组来说，则为下标（0,1,2…,length-1）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(var key in arr) &#123;</span><br><span class="line">    //执行相关操作</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> <strong>for…of循环（ES6支持）</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(let item of arr) &#123;</span><br><span class="line">    //执行相关操作</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>和<code>for...in</code>不同的是，<code>for...of</code>迭代出来的是值（value），对于数组来说，则是一个元素值。</p>
<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><h4 id="for…in"><a href="#for…in" class="headerlink" title="for…in"></a>for…in</h4><p><strong>for…in遍历</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> book = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;hello&quot;</span>,</span><br><span class="line">    <span class="attr">id</span>: <span class="string">&quot;2&quot;</span>,</span><br><span class="line">    <span class="attr">author</span>: <span class="string">&quot;ztyzz&quot;</span>,</span><br><span class="line">    <span class="attr">time</span>: <span class="string">&quot;2018.2.30&quot;</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">var</span> el <span class="keyword">in</span> book) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(book[el]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>for … of遍历</strong></p>
<p>此方法，<strong>不能遍历普通对象</strong>(因为能够被for…of正常遍历的，都需要实现一个遍历器Iterator。而数组、字符串、Set、Map结构，早就内置好了Iterator（迭代器），它们的原型中都有一个Symbol.iterator方法，而Object对象并没有实现这个接口（<strong>对象（Object）之所以没有默认部署Iterator接口，是因为对象的哪个属性先遍历，哪个属性后遍历是不确定的，需要开发者手动指定。</strong>），使得它无法被for…of遍历。)，需要和<code>Object.keys()</code>搭配使用，先获取对象的所有key的数组 然后遍历：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var book = &#123;</span><br><span class="line">    name: &quot;hello&quot;,</span><br><span class="line">    id: &quot;2&quot;,</span><br><span class="line">    author: &quot;ztyzz&quot;,</span><br><span class="line">    time: &quot;2018.2.30&quot;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line">for(var key of Object.keys(book)) &#123;</span><br><span class="line">    console.log(book[key]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>【注意】<code>Object.values()</code>返回对象所有的键值组成的数组，但是由于无法获取到key值，功能会比较残缺。</p>
<p>同时，由于<code>Object.keys()</code>返回一个数组,包括对象自身的(不含继承的)所有可枚举属性(不含Symbol属性).所以我们可以使用forEach()等上面的方法，来进行数组的遍历，再通过对象的访问来进行值的访问。</p>
<h2 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="string">&#x27;window&#x27;</span></span><br><span class="line"><span class="keyword">const</span> p1 = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;foo&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">People</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">  <span class="built_in">this</span>.name = name</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Foo = People.bind(p1)</span><br><span class="line">Foo(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">console</span>.log(p1);</span><br><span class="line"><span class="keyword">const</span> foo = <span class="keyword">new</span> Foo(<span class="string">&#x27;boo&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(foo.name);</span><br><span class="line"><span class="built_in">console</span>.log(name);</span><br></pre></td></tr></table></figure>

<h2 id="数据转化"><a href="#数据转化" class="headerlink" title="数据转化"></a>数据转化</h2><h4 id="自动转换"><a href="#自动转换" class="headerlink" title="自动转换"></a>自动转换</h4><h5 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h5><h6 id="不全等"><a href="#不全等" class="headerlink" title="不全等"></a>不全等</h6><p>null,NaN,undefined,0-0,+0,true,false</p>
<p><strong>基本数据类型有隐式转换</strong></p>
<ul>
<li><p>字符串与数字比较 （等号两侧转化为数字，再比较）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  　　100 == &quot;100&quot;　　==&gt;　　100 == 100　　//　true</span><br><span class="line">  　　100 == &quot;99&quot;　　==&gt;　　100 == 99　　//　false</span><br><span class="line">  　　100 == &quot;abc&quot;　　==&gt;　　100 == NaN　　//　false</span><br><span class="line">  　　1 == &quot;abc&quot;　　==&gt;　　1 == NaN　　//　false</span><br><span class="line">  　　1 == &quot;&quot;　　==&gt;　　1 == 0　　//　false</span><br></pre></td></tr></table></figure></li>
<li><p>字符串与布尔值比较（等号两侧转换为数字，再比较）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  　　&quot;abc&quot; == true　　==&gt;　　NaN == 1　　//　false</span><br><span class="line">  　　&quot;abc&quot; == false　　==&gt;　　NaN == 0　　//　false</span><br><span class="line">  　　&quot;&quot; == true　　==&gt;　　0 == 1　　//　false</span><br><span class="line">  　　&quot;&quot; == false　　==&gt;　　0 == 0　　//　true</span><br></pre></td></tr></table></figure></li>
<li><p>数字与布尔值比较（等号两侧转换为数字，再比较）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">  　　1 == true　　==&gt;　　1 == 1　　//　true</span><br><span class="line">  　　0 == true　　==&gt;　　0 == 1　　//　false</span><br><span class="line">  　　100 == true　　==&gt;　　100 == 1　　//　false</span><br><span class="line">  　　1 == false　　==&gt;　　1 == 0　　//　false</span><br><span class="line">  　　0 == false　　==&gt;　　0 == 0　　//　true</span><br><span class="line">  　　100 == false　　==&gt;　　100 == 0　　//　false</span><br></pre></td></tr></table></figure></li>
<li><p>undefined 和 null</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">undefined 与 null 比较特殊,比较相等性之前，不能将 null 和 undefined 转换成其他任何值。undefined 和 null 互相比较返回 true，和自身比较也返回 true，其他情况返回 false</span><br><span class="line">　　undefiend == undefined　　//　true</span><br><span class="line">　　undefined == null　　//　true</span><br><span class="line">　　null == null　　//　true</span><br><span class="line">　　undefined == 其他值　　//　false</span><br><span class="line">　　null == 其他值　　//　false</span><br></pre></td></tr></table></figure></li>
<li><p>NaN</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NaN（非数值）也很特殊，NaN 和任何值（包括自己）比较都是返回 false</span><br><span class="line">NaN == NaN　　//　false</span><br><span class="line">NaN == 其他值　　//　false</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>复杂数据类型</strong></p>
<p>由于引用类型保存的是对象（包括数组，函数）的地址值，所以地址值不同的，返回的都是 false</p>
<ul>
<li><p>等号两侧为不同的引用数据类型时</p>
</li>
<li><p>有且只有一侧为引用数据类型时</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[1，2] == 1 ==&gt; NaN == 1　　//　false</span><br><span class="line">[1，2] == true ==&gt; NaN == 1　　//　false</span><br><span class="line">[1] == 1 ==&gt; 1 == 1　　//　true</span><br><span class="line">[1] == &#x27;1&#x27; ==&gt; &#x27;1&#x27; == &#x27;1&#x27;　　//　true</span><br><span class="line"></span><br><span class="line">[] == 0 ==&gt; 0 == 0　　//　true</span><br><span class="line">[] == &#x27;0&#x27; ==&gt; &#x27;&#x27; == &#x27;0&#x27;　　//　false</span><br><span class="line">[] == &#x27;&#x27; ==&gt; &#x27;&#x27; == &#x27;&#x27;　　//　true</span><br></pre></td></tr></table></figure></li>
</ul>
<h6 id="全等"><a href="#全等" class="headerlink" title="全等"></a>全等</h6><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+0 === -0 //true</span><br><span class="line">实际意义上的全等</span><br><span class="line">Object.is(+0, -0) // false</span><br><span class="line">Object.is(NaN, NaN) // true</span><br></pre></td></tr></table></figure>

<h5 id="自动转换布尔值"><a href="#自动转换布尔值" class="headerlink" title="自动转换布尔值"></a>自动转换布尔值</h5><p>除了以下五个值，其他都是自动转为<code>true</code>。</p>
<ul>
<li><code>undefined</code></li>
<li><code>null</code></li>
<li><code>+0</code>或<code>-0</code></li>
<li><code>NaN</code></li>
<li><code>&#39;&#39;</code>（空字符串）</li>
</ul>
<h5 id="自动转换为字符串"><a href="#自动转换为字符串" class="headerlink" title="自动转换为字符串"></a>自动转换为字符串</h5><p>具体规则是，先将复合类型的值转为原始类型的值，再将原始类型的值转为字符串。</p>
<p>字符串的自动转换，主要发生在字符串的加法运算时。当一个值为字符串，另一个值为非字符串，则后者转为字符串。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x27;5&#x27; + 1 // &#x27;51&#x27;</span><br><span class="line">&#x27;5&#x27; + true // &quot;5true&quot;</span><br><span class="line">&#x27;5&#x27; + false // &quot;5false&quot;</span><br><span class="line">&#x27;5&#x27; + &#123;&#125; // &quot;5[object Object]&quot;</span><br><span class="line">&#x27;5&#x27; + [] // &quot;5&quot;</span><br><span class="line">&#x27;5&#x27; + function ()&#123;&#125; // &quot;5function ()&#123;&#125;&quot;</span><br><span class="line">&#x27;5&#x27; + undefined // &quot;5undefined&quot;</span><br><span class="line">&#x27;5&#x27; + null // &quot;5null&quot;</span><br></pre></td></tr></table></figure>

<h5 id="自动转换为数值"><a href="#自动转换为数值" class="headerlink" title="自动转换为数值"></a>自动转换为数值</h5><p>JavaScript 遇到预期为数值的地方，就会将参数值自动转换为数值。系统内部会自动调用<code>Number()</code>函数。</p>
<p>除了加法运算符（<code>+</code>）有可能把运算子转为字符串，其他运算符都会把运算子自动转成数值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x27;5&#x27; - &#x27;2&#x27; // 3</span><br><span class="line">&#x27;5&#x27; * &#x27;2&#x27; // 10</span><br><span class="line">true - 1  // 0</span><br><span class="line">false - 1 // -1</span><br><span class="line">&#x27;1&#x27; - 1   // 0</span><br><span class="line">&#x27;5&#x27; * []    // 0</span><br><span class="line">false / &#x27;5&#x27; // 0</span><br><span class="line">&#x27;abc&#x27; - 1   // NaN</span><br><span class="line">null + 1 // 1</span><br><span class="line">undefined + 1 // NaN</span><br></pre></td></tr></table></figure>

<p>上面代码中，运算符两侧的运算子，都被转成了数值。</p>
<blockquote>
<p>注意：<code>null</code>转为数值时为<code>0</code>，而<code>undefined</code>转为数值时为<code>NaN</code>。</p>
</blockquote>
<p>一元运算符也会把运算子转成数值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+&#x27;abc&#x27; // NaN</span><br><span class="line">-&#x27;abc&#x27; // NaN</span><br><span class="line">+true // 1</span><br><span class="line">-false // 0</span><br></pre></td></tr></table></figure>

<h4 id="强制转换"><a href="#强制转换" class="headerlink" title="强制转换"></a>强制转换</h4><h5 id="Number"><a href="#Number" class="headerlink" title="Number"></a>Number</h5><ul>
<li><p>基本类型</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 数值：转换后还是原来的值</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="number">324</span>) <span class="comment">// 324</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串：如果可以被解析为数值，则转换为相应的数值</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">&#x27;324&#x27;</span>) <span class="comment">// 324</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串：如果不可以被解析为数值，返回 NaN</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">&#x27;324abc&#x27;</span>) <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 空字符串转为0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="string">&#x27;&#x27;</span>) <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 布尔值：true 转成 1，false 转成 0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">true</span>) <span class="comment">// 1</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">false</span>) <span class="comment">// 0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// undefined：转成 NaN</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">undefined</span>) <span class="comment">// NaN</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// null：转成0</span></span><br><span class="line"><span class="built_in">Number</span>(<span class="literal">null</span>) <span class="comment">// 0</span></span><br></pre></td></tr></table></figure>

<p><code>Number</code>函数将字符串转为数值，要比<code>parseInt</code>函数严格很多。基本上，只要有一个字符无法转成数值，整个字符串就会被转为<code>NaN</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">parseInt(&#x27;42 cats&#x27;) // 42</span><br><span class="line">Number(&#x27;42 cats&#x27;) // NaN</span><br></pre></td></tr></table></figure></li>
<li><p>引用类型</p>
<p>简单的规则是，<code>Number</code>方法的参数是对象时，将返回<code>NaN</code>，除非是包含单个数值的数组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Number(&#123;a: 1&#125;) // NaN</span><br><span class="line">Number([1, 2, 3]) // NaN</span><br><span class="line">Number([5]) // 5</span><br></pre></td></tr></table></figure>

<p>第一步，调用对象自身的<code>valueOf</code>方法。如果返回原始类型的值，则直接对该值使用<code>Number</code>函数，不再进行后续步骤。</p>
<p>第二步，如果<code>valueOf</code>方法返回的还是对象，则改为调用对象自身的<code>toString</code>方法。如果<code>toString</code>方法返回原始类型的值，则对该值使用<code>Number</code>函数，不再进行后续步骤。</p>
<p>第三步，<strong>如果<code>toString</code>方法返回的是对象</strong>，就报错。</p>
<p>请看下面的例子。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123; x: 1 &#125;;</span><br><span class="line">console.log(Number(obj)); // NaN</span><br><span class="line"></span><br><span class="line">// 等同于</span><br><span class="line">if (typeof obj.valueOf() === &#x27;object&#x27;) &#123;</span><br><span class="line">  console.log(Number(obj.toString()));</span><br><span class="line">&#125; else &#123;</span><br><span class="line">  console.log(Number(obj.valueOf()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面代码中，<code>Number</code>函数将<code>obj</code>对象转为数值。背后发生了一连串的操作，首先调用<code>obj.valueOf</code>方法, 结果返回对象本身；于是，继续调用<code>obj.toString</code>方法，这时返回字符串<code>[object Object]</code>，对这个字符串使用<code>Number</code>函数，得到<code>NaN</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123;</span><br><span class="line">  valueOf: function () &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  toString: function () &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Number(obj)</span><br><span class="line">// TypeError: Cannot convert object to primitive value</span><br></pre></td></tr></table></figure>

<p>上面代码的<code>valueOf</code>和<code>toString</code>方法，返回的都是对象，所以转成数值时会报错。</p>
</li>
</ul>
<h5 id="string"><a href="#string" class="headerlink" title="string"></a>string</h5><ul>
<li><p>基本类型</p>
<ul>
<li><strong>数值</strong>：转为相应的字符串。</li>
<li><strong>字符串</strong>：转换后还是原来的值。</li>
<li><strong>布尔值</strong>：<code>true</code>转为字符串<code>&quot;true&quot;</code>，<code>false</code>转为字符串<code>&quot;false&quot;</code>。</li>
<li><strong>undefined</strong>：转为字符串<code>&quot;undefined&quot;</code>。</li>
<li><strong>null</strong>：转为字符串<code>&quot;null&quot;</code>。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">String(123) // &quot;123&quot;</span><br><span class="line">String(&#x27;abc&#x27;) // &quot;abc&quot;</span><br><span class="line">String(true) // &quot;true&quot;</span><br><span class="line">String(undefined) // &quot;undefined&quot;</span><br><span class="line">String(null) // &quot;null&quot;</span><br></pre></td></tr></table></figure></li>
<li><p>引用类型</p>
<p><code>String</code>方法的参数如果是对象，返回一个类型字符串；如果是数组，返回该数组的字符串形式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">String(&#123;a: 1&#125;) // &quot;[object Object]&quot;</span><br><span class="line">String([1, 2, 3]) // &quot;1,2,3&quot;</span><br></pre></td></tr></table></figure>

<p><code>String</code>方法背后的转换规则，与<code>Number</code>方法基本相同，只是互换了<code>valueOf</code>方法和<code>toString</code>方法的执行顺序。</p>
<ol>
<li>先调用对象自身的<code>toString</code>方法。如果返回原始类型的值，则对该值使用<code>String</code>函数，不再进行以下步骤。</li>
<li>如果<code>toString</code>方法返回的是对象，再调用原对象的<code>valueOf</code>方法。如果<code>valueOf</code>方法返回原始类型的值，则对该值使用<code>String</code>函数，不再进行以下步骤。</li>
<li>如果<code>valueOf</code>方法返回的是对象，就报错。</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">  valueOf: function () &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  toString: function () &#123;</span><br><span class="line">    return &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">String(obj)</span><br><span class="line">// TypeError: Cannot convert object to primitive value</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="Boolean"><a href="#Boolean" class="headerlink" title="Boolean"></a>Boolean</h5><p><code>Boolean()</code>函数可以将任意类型的值转为布尔值。</p>
<p>它的转换规则相对简单：除了以下五个值的转换结果为<code>false</code>，其他的值全部为<code>true</code>。</p>
<ul>
<li><code>undefined</code></li>
<li><code>null</code></li>
<li><code>0</code>（包含<code>-0</code>和<code>+0</code>）</li>
<li><code>NaN</code></li>
<li><code>&#39;&#39;</code>（空字符串）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Boolean(undefined) // false</span><br><span class="line">Boolean(null) // false</span><br><span class="line">Boolean(0) // false</span><br><span class="line">Boolean(NaN) // false</span><br><span class="line">Boolean(&#x27;&#x27;) // false</span><br></pre></td></tr></table></figure>

<p>当然，<code>true</code>和<code>false</code>这两个布尔值不会发生变化。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Boolean(true) // true</span><br><span class="line">Boolean(false) // false</span><br></pre></td></tr></table></figure>

<p>注意，所有对象（包括空对象）的转换结果都是<code>true</code>，甚至连<code>false</code>对应的布尔对象<code>new Boolean(false)</code>也是<code>true</code>（详见《原始类型值的包装对象》一章）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Boolean(&#123;&#125;) // true</span><br><span class="line">Boolean([]) // true</span><br><span class="line">Boolean(new Boolean(false)) // true</span><br></pre></td></tr></table></figure>



<h2 id="判断数据类型"><a href="#判断数据类型" class="headerlink" title="判断数据类型"></a>判断数据类型</h2><h5 id="1、typeof"><a href="#1、typeof" class="headerlink" title="1、typeof"></a><strong>1、typeof</strong></h5><p>typeof 是一个操作符，其右侧跟一个一元表达式，并返回这个表达式的数据类型。返回的结果用该类型的字符串(全小写字母)形式表示，包括以下 7 种：</p>
<ul>
<li>值类型(基本类型)：字符串（String）、数字(Number)、布尔(Boolean)、对空（Null）、未定义（Undefined）、Symbol。</li>
<li>引用数据类型：对象(Object)、数组(Array)、函数(Function)。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span><span class="string">&#x27;&#x27;</span>; <span class="comment">// string 有效</span></span><br><span class="line">typeof1; <span class="comment">// number 有效</span></span><br><span class="line">typeofSymbol(); <span class="comment">// symbol 有效</span></span><br><span class="line">typeoftrue; <span class="comment">//boolean 有效</span></span><br><span class="line">typeofundefined; <span class="comment">//undefined 有效</span></span><br><span class="line">typeofnull; <span class="comment">//object 无效</span></span><br><span class="line"><span class="keyword">typeof</span>[] ; <span class="comment">//object 无效</span></span><br><span class="line">typeofnewFunction(); <span class="comment">// function 有效</span></span><br><span class="line">typeofnewDate(); <span class="comment">//object 无效</span></span><br><span class="line">typeofnewRegExp(); <span class="comment">//object 无效</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ul>
<li>对于基本类型，除 null 以外，均可以返回正确的结果。</li>
<li>对于引用类型，除 function 以外，一律返回 object 类型。</li>
<li>对于 null ，返回 object 类型。因为在定义typeof时还没有null这种类型。</li>
</ul>
<p>其中，null 有属于自己的数据类型 Null ， 引用类型中的 数组、日期、正则 也都有属于自己的具体类型，而 typeof 对于这些类型的处理，<strong>只返回了处于其原型链最顶端的 Object 类型</strong>，没有错，但不是我们想要的结果。</p>
<h5 id="2、instanceof"><a href="#2、instanceof" class="headerlink" title="2、instanceof"></a><strong>2、instanceof</strong></h5><p>instanceof 是用来<strong>判断 A 是否为 B 的实例</strong>(不能判断一个对象实例具体属于哪种类型)</p>
<p>表达式为：A instanceof B。如果 A 是 B 的实例，则返回 true,否则返回 false。 </p>
<p>在这里需要特别注意的是：<strong>instanceof 检测的是原型</strong>，我们用一段伪代码来模拟其内部执行过程：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">instanceof</span> (A,B) = &#123;</span><br><span class="line">    varL = A.__proto__;</span><br><span class="line">    varR = B.prototype;</span><br><span class="line">    <span class="keyword">if</span>(L === R) &#123;</span><br><span class="line">        <span class="comment">// A的内部属性 __proto__ 指向 B 的原型对象</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从上述过程可以看出，<strong>当 A 的 proto 指向 B 的 prototype 时，就认为 A 就是 B 的实例</strong>，我们再来看几个例子：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Array</span>; <span class="comment">// true</span></span><br><span class="line">&#123;&#125; <span class="keyword">instanceof</span> <span class="built_in">Object</span>;<span class="comment">// true</span></span><br><span class="line">newDate() <span class="keyword">instanceof</span> <span class="built_in">Date</span>;<span class="comment">// true</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">new</span> Person() <span class="keyword">instanceof</span> Person;</span><br><span class="line"> </span><br><span class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Object</span>; <span class="comment">// true</span></span><br><span class="line">newDate() <span class="keyword">instanceof</span> <span class="built_in">Object</span>;<span class="comment">// true</span></span><br><span class="line">newPerson <span class="keyword">instanceof</span> <span class="built_in">Object</span>;<span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p><strong>虽然 instanceof 能够判断出 [ ] 是Array的实例，但它认为 [ ] 也是Object的实例</strong></p>
<p>我们来分析一下 [ ]、Array、Object 三者之间的关系：</p>
<p>从 instanceof 能够判断出 [ ].<strong>proto</strong>  指向 Array.prototype，而 Array.prototype.<strong>proto</strong> 又指向了Object.prototype，最终 Object.prototype.<strong>proto</strong> 指向了null，标志着原型链的结束。因此，[]、Array、Object 就在内部形成了一条原型链：</p>
<p><img src="https://images2015.cnblogs.com/blog/849589/201601/849589-20160112232510850-2003340583.png" alt="img"></p>
<p>从原型链可以看出，[] 的 <strong>proto</strong>  直接指向Array.prototype，间接指向 Object.prototype，所以按照 instanceof 的判断规则，[] 就是Object的实例。依次类推，类似的 new Date()、new Person() 也会形成一条对应的原型链 。因此，<strong>instanceof 只能用来判断两个对象是否属于实例关系， 而不能判断一个对象实例具体属于哪种类型。</strong></p>
<h5 id="3、constructor"><a href="#3、constructor" class="headerlink" title="3、constructor"></a><strong>3、constructor</strong></h5><p>当一个函数 F被定义时，JS引擎会为F添加 prototype 原型，然后<strong>在 prototype上添加一个 constructor 属性，并让其指向 F 的引用</strong>。如下所示：</p>
<p><img src="https://images2015.cnblogs.com/blog/849589/201705/849589-20170508125250566-1896556617.png" alt="img"></p>
<p>当执行 var f = new F() 时，F 被当成了构造函数，f 是F的实例对象，此时 <strong>F 原型上的 constructor 传递到了 f 上</strong>，因此 f.constructor == F</p>
<p><img src="https://images2015.cnblogs.com/blog/849589/201705/849589-20170508125714941-1649387639.png" alt="img"></p>
<p>可以看出，<strong>F 利用原型对象上的 constructor 引用了自身，当 F 作为构造函数来创建对象时，原型上的 constructor 就被遗传到了新创建的对象上</strong>， 从原型链角度讲，构造函数 F 就是新对象的类型。这样做的意义是，让新对象在诞生以后，就具有可追溯的数据类型。</p>
<p>同样，JavaScript 中的内置对象在内部构建时也是这样做的：</p>
<p><img src="https://images2015.cnblogs.com/blog/849589/201705/849589-20170508131800457-2091987664.png" alt="img"></p>
<blockquote>
<ul>
<li><p>null 和 undefined 是无效的对象，因此是不会有 constructor 存在的，这两种类型的数据需要通过其他方式来判断。</p>
</li>
<li><p>函数的 constructor 是不稳定的，这个主要体现在自定义对象上，当开发者重写 prototype 后，原有的 constructor 引用会丢失，constructor 会默认为 Object</p>
</li>
</ul>
</blockquote>
<p><img src="https://images2015.cnblogs.com/blog/849589/201705/849589-20170508132757347-1999338357.png" alt="img"></p>
<p>为什么变成了 Object？</p>
<p>因为 <strong>prototype 被重新赋值的是一个 { }， { } 是 new Object() 的字面量，因此 new Object() 会将 Object 原型上的 constructor 传递给 { }，也就是 Object 本身。</strong></p>
<p><strong>因此，为了规范开发，在重写对象原型时一般都需要重新给 constructor 赋值，以保证对象实例的类型不被篡改</strong>。</p>
<h5 id="4、toString"><a href="#4、toString" class="headerlink" title="4、toString"></a><strong>4、toString</strong></h5><p>toString() 是 Object 的原型方法，调用该方法，默认返回当前对象的 [[Class]] 。这是一个内部属性，其格</p>
<p>式为 [object Xxx] ，其中 Xxx 就是对象的类型。</p>
<p>对于 Object 对象，直接调用 toString() 就能返回 [object Object] 。而对于其他对象，则需要通过 call / </p>
<p>apply 来调用才能返回正确的类型信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Object.prototype.toString.call(&#x27;&#x27;) ;   // [object String]</span><br><span class="line">Object.prototype.toString.call(1) ;    // [object Number]</span><br><span class="line">Object.prototype.toString.call(true) ; // [object Boolean]</span><br><span class="line">Object.prototype.toString.call(Symbol()); //[object Symbol]</span><br><span class="line">Object.prototype.toString.call(undefined) ; // [object Undefined]</span><br><span class="line">Object.prototype.toString.call(null) ; // [object Null]</span><br><span class="line">Object.prototype.toString.call(newFunction()) ; // [object Function]</span><br><span class="line">Object.prototype.toString.call(newDate()) ; // [object Date]</span><br><span class="line">Object.prototype.toString.call([]) ; // [object Array]</span><br><span class="line">Object.prototype.toString.call(newRegExp()) ; // [object RegExp]</span><br><span class="line">Object.prototype.toString.call(newError()) ; // [object Error]</span><br><span class="line">Object.prototype.toString.call(document) ; // [object HTMLDocument]</span><br><span class="line">Object.prototype.toString.call(window) ; //[object global] window 是全局对象 global 的引用</span><br></pre></td></tr></table></figure>



<h2 id="兼容性"><a href="#兼容性" class="headerlink" title="兼容性"></a>兼容性</h2><p>webpak 引入autoprefixer，自动加上各种前缀让不同的浏览器得以支持</p>
<p>冒泡和捕获</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pauseEvent</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (e.stopPropagation) e.stopPropagation();</span><br><span class="line">    e.cancelBubble = <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//防止冒泡和捕获</span></span><br><span class="line">w3c的方法是e.stopPropagation()，IE则是使用e.cancelBubble = <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>取消默认事件</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">pauseEvent</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (e.preventDefault) e.preventDefault();</span><br><span class="line">    e.returnValue = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//取消默认事件</span></span><br><span class="line">w3c的方法是e.preventDefault()，IE则是使用e.returnValue = <span class="literal">false</span>;</span><br><span class="line"><span class="comment">//return false</span></span><br><span class="line">javascript的<span class="keyword">return</span> <span class="literal">false</span>只会阻止默认行为，而是用jQuery的话则既阻止默认行为又防止对象冒泡。</span><br></pre></td></tr></table></figure>

<p>event事件对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ev = ev || <span class="built_in">window</span>.event </span><br><span class="line"><span class="built_in">document</span>.documentElement.clientWidth || <span class="built_in">document</span>.body.clientWidth </span><br><span class="line"><span class="keyword">var</span> target = ev.srcElement||ev.target</span><br></pre></td></tr></table></figure>

<p>设备像素比</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取设备像素比</span></span><br><span class="line"><span class="keyword">var</span> getPixelRatio = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> backingStore =</span><br><span class="line">context.backingStorePixelRatio ||</span><br><span class="line">context.webkitBackingStorePixelRatio ||</span><br><span class="line">context.mozBackingStorePixelRatio ||</span><br><span class="line">context.msBackingStorePixelRatio ||</span><br><span class="line">context.oBackingStorePixelRatio ||</span><br><span class="line">context.backingStorePixelRatio ||</span><br><span class="line"><span class="keyword">return</span> (<span class="built_in">window</span>.devicePixelRatio || <span class="number">1</span>) / backingStore;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> pixelRatio = getPixelRatio(canvas);</span><br></pre></td></tr></table></figure>

<h2 id="回到顶部"><a href="#回到顶部" class="headerlink" title="回到顶部"></a>回到顶部</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//图标固定</span></span><br><span class="line">  <span class="keyword">var</span> c = <span class="number">0</span>;</span><br><span class="line">  $(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> a = $(<span class="built_in">document</span>).scrollTop() - $(<span class="string">&quot;.guide-box&quot;</span>).offset().top;</span><br><span class="line">    <span class="keyword">let</span> b = $(<span class="string">&quot;.guide-ico&quot;</span>).css(<span class="string">&quot;margin-top&quot;</span>);</span><br><span class="line">    b = b.substr(<span class="number">0</span>, b.length - <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">if</span> (a &gt; <span class="number">0</span> &amp;&amp; a - c &gt; <span class="number">0</span> &amp;&amp; a &lt; $(<span class="string">&quot;.guide-box&quot;</span>).height() * <span class="number">0.8</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (a  &gt; b) &#123;</span><br><span class="line">        $(<span class="string">&quot;.guide-ico&quot;</span>).css(&#123;</span><br><span class="line">          <span class="attr">top</span>: a - b,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (a &gt; <span class="number">0</span> &amp;&amp; a - c &lt; <span class="number">0</span> &amp;&amp;a &lt; $(<span class="string">&quot;.guide-box&quot;</span>).height() * <span class="number">0.8</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (a &gt; b) &#123;</span><br><span class="line">        $(<span class="string">&quot;.guide-ico&quot;</span>).css(&#123;</span><br><span class="line">          <span class="attr">top</span>: a-b,</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    c = a;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="时间"><a href="#时间" class="headerlink" title="时间"></a>时间</h2><h3 id="纯js"><a href="#纯js" class="headerlink" title="纯js"></a>纯js</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//时间差</span></span><br><span class="line"><span class="keyword">let</span> t1 = moment().locale(<span class="string">&quot;zh-cn&quot;</span>).format(<span class="string">&quot;YYYY-MM-DD HH:mm:ss&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> t2 = moment(<span class="string">&quot;2021-07-02 14:33:33&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> t3 = t2.diff(t1, <span class="string">&quot;second&quot;</span>); <span class="comment">//计算相差的秒</span></span><br><span class="line"><span class="keyword">let</span> d = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.floor(t3 / <span class="number">60</span>) / <span class="number">60</span>) / <span class="number">24</span>); <span class="comment">//相差的天</span></span><br><span class="line"><span class="comment">//时</span></span><br><span class="line"><span class="keyword">let</span> t = t3 - d * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span>;</span><br><span class="line">t = <span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.floor(t / <span class="number">60</span>) / <span class="number">60</span>);</span><br><span class="line"><span class="comment">//分</span></span><br><span class="line"><span class="keyword">let</span> m = t3 - d * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> - t * <span class="number">60</span> * <span class="number">60</span>;</span><br><span class="line">m = <span class="built_in">Math</span>.floor(m / <span class="number">60</span>);</span><br><span class="line"><span class="comment">//秒</span></span><br><span class="line"><span class="keyword">let</span> s = t3 - d * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> - t * <span class="number">60</span> * <span class="number">60</span> - m * <span class="number">60</span>;</span><br></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//比较时间</span></span><br><span class="line">compareTime = <span class="function">(<span class="params">startTime, endTime</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> start_time = startTime.replace(<span class="regexp">/-|\s|:|\//g</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> end_time = endTime.replace(<span class="regexp">/-|\s|:|\//g</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (start_time &lt; end_time) &#123; <span class="keyword">return</span> <span class="literal">true</span>; &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="moment"><a href="#moment" class="headerlink" title="moment"></a>moment</h3><p>获取前一天的日期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">moment(new Date()).subtract(1, &quot;days&quot;).format(&quot;YYYY-MM-DD&quot;)</span><br></pre></td></tr></table></figure>

<p>比较时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">compareTime = (startTime, endTime) =&gt; &#123;</span><br><span class="line">	return moment(startTime).isBefore(endTime)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>以什么格式获取当前时间</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let now = moment().locale(&#x27;zh-cn&#x27;).format(&#x27;YYYY-MM-DD HH:mm:ss&#x27;);</span><br></pre></td></tr></table></figure>

<p>距离当前时间60天的moment对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">moment().subtract(60, &#x27;days&#x27;)</span><br></pre></td></tr></table></figure>

<p>传入年份和月份 获取该年对应月份的天数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function getMonthDays(year,month)&#123;</span><br><span class="line"></span><br><span class="line"> var thisDate = new Date(year,month,0); //当天数为0 js自动处理为上一月的最后一天</span><br><span class="line"></span><br><span class="line"> return thisDate.getDate();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>两个时间相差多少天</p>
<p>分别获取两个日期的<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%97%B6%E9%97%B4%E6%88%B3&spm=1001.2101.3001.7020">时间戳</a>，相减得到数值是毫秒，再换算成天（即除以1 * 24 * 60 * 60 * 1000）即可。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>startDate  开始日期 yyyy-MM-dd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>enDate  结束日期 yyyy-MM-dd</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;number&#125;</span> </span>两日期相差的天数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">getDaysBetween</span>(<span class="params">startDate, enDate</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> sDate = <span class="built_in">Date</span>.parse(startDate)</span><br><span class="line">  <span class="keyword">const</span> eDate = <span class="built_in">Date</span>.parse(enDate)</span><br><span class="line">  <span class="comment">// if (sDate &gt; eDate) &#123;</span></span><br><span class="line">  <span class="comment">//   return 0</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line">  <span class="keyword">if</span> (sDate === eDate) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> days = (eDate - sDate) / (<span class="number">1</span> * <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.abs(days)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(getDaysBetween(<span class="string">&#x27;2021-04-21&#x27;</span>, <span class="string">&#x27;2021-03-22&#x27;</span>)) <span class="comment">// 输出结果为44275</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="获取url的参数"><a href="#获取url的参数" class="headerlink" title="获取url的参数"></a>获取url的参数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">function getQueryVariable(variable)&#123;</span><br><span class="line">    let a=window.location.href.split(&quot;?&quot;)[1];</span><br><span class="line">    var query = a;</span><br><span class="line">    var vars = query.split(&quot;&amp;&quot;);</span><br><span class="line">    for (var i=0;i&lt;vars.length;i++) &#123;</span><br><span class="line">    var pair = vars[i].split(&quot;=&quot;);</span><br><span class="line">    if(pair[0] == variable)&#123;return pair[1];&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return(false);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function getUrl(href = &#x27;&#x27;) &#123;</span><br><span class="line">  var url =decodeURIComponent(href || window.location.href); //获取url中&quot;?&quot;符后的字串</span><br><span class="line">  var theRequest = new Object();</span><br><span class="line">  if (url.lastIndexOf(&quot;?&quot;) != -1) &#123;</span><br><span class="line">    var str =url.substring(url.lastIndexOf(&quot;?&quot;) + 1, url.length);</span><br><span class="line">    const strs = str.split(&quot;&amp;&quot;);</span><br><span class="line">    for (var i = 0; i &lt; strs.length; i++) &#123;</span><br><span class="line">      theRequest[strs[i].split(&quot;=&quot;)[0]] = unescape(strs[i].split(&quot;=&quot;)[1]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  return theRequest;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数组转换为JSON数据"><a href="#数组转换为JSON数据" class="headerlink" title="数组转换为JSON数据"></a>数组转换为JSON数据</h2><p><strong>方法一：使用Object.assign()</strong></p>
<p>Object.assign()方法将<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%9E%9A%E4%B8%BE&spm=1001.2101.3001.7020">枚举</a>的所有属性的值从源对象（一个或多个）复制到目标对象</p>
<p><strong>语法：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(target, ...sources)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var array = [34, 24, 31, 48];</span><br><span class="line">JSON.stringify(Object.assign(&#123;&#125;, array))</span><br><span class="line">//&#x27;&#123;&quot;0&quot;:34,&quot;1&quot;:24,&quot;2&quot;:31,&quot;3&quot;:48&#125;&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="setTimeout-1"><a href="#setTimeout-1" class="headerlink" title="setTimeout"></a>setTimeout</h2><p>看以下例子可以知道，代码运行为6次打印了6。因为setTimeout因为是一个异步函数，var变量存在变量提升、无块级作用域等，等执行到setTimeout时，for循环已经遍历结束，i的值已经是6。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(i) <span class="comment">//6,6,6,6,6,6</span></span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解决办法</p>
<p>1、闭包；使用闭包将i的值驻留在内存中，打印j的值（形成了自己的作用域），实际的外部函数的变量i</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">  (<span class="function"><span class="keyword">function</span> (<span class="params">j</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(j)<span class="comment">// 0,1,2,3,4,5</span></span><br><span class="line">    &#125;, <span class="number">1000</span>)</span><br><span class="line">  &#125;)(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2、setTimeout的第三个参数，该参数就是给setTimeout第一个函数的参数。每次传入setTimeout第一个函数的j值是for遍历的值，个人认为还是作用域的问题。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(</span><br><span class="line">    <span class="function">(<span class="params">j</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(j)<span class="comment">// 0,1,2,3,4,5</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="number">1000</span>,</span><br><span class="line">    i</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数组循环中删除元素"><a href="#数组循环中删除元素" class="headerlink" title="数组循环中删除元素"></a>数组循环中删除元素</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(function () &#123;</span><br><span class="line">    var arr = [1, 2, 2, 3, 4, 5];</span><br><span class="line">    for (var i = 0; i &lt; arr.length; i++)&#123;</span><br><span class="line">        // 打印数组中的情况，便于跟踪数组中数据的变化</span><br><span class="line">        console.log(i + &#x27; = &#x27; + arr[i]);</span><br><span class="line">        // 删除掉所有为2的元素</span><br><span class="line">        if(arr[i] === 2) &#123;</span><br><span class="line">            arr.splice(i, 1);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    console.log(arr);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<p>产生这个结果的原因是因为，当删除掉了一个元素后，数组中元素的索引（下标）发生了实时变化，造成了程序的异常。</p>
<p>方案</p>
<ol>
<li><p>循环中索引添加递加判断,只有在不删除元素时才对索引递加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for(var i=0; i&lt;arr.length;) &#123;</span><br><span class="line">  if(arr[i].gender === 2) &#123;</span><br><span class="line">    arr.splice(i,1);</span><br><span class="line">  &#125;else&#123;</span><br><span class="line">    i++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>倒序删除</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">(function () &#123;</span><br><span class="line">    var arr = [1, 2, 2, 3, 4, 5];</span><br><span class="line">    var i = arr.length;</span><br><span class="line">    while(i--) &#123;</span><br><span class="line">        console.log(i + &#x27; = &#x27; + arr[i]);</span><br><span class="line">        if(arr[i] === 2) &#123;</span><br><span class="line">            arr.splice(i, 1);</span><br><span class="line">        &#125;</span><br><span class="line">     &#125;</span><br><span class="line">    console.log(arr);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<h2 id="业务"><a href="#业务" class="headerlink" title="业务"></a>业务</h2><h3 id="防抖-节流"><a href="#防抖-节流" class="headerlink" title="防抖/节流"></a>防抖/节流</h3><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c8b86b09daf0">https://www.jianshu.com/p/c8b86b09daf0</a></p>
<p>防抖和节流是针对<strong>响应跟不上触发频率</strong>这类问题的两种解决方案。 在给DOM绑定事件时，有些事件我们是无法控制触发频率的。 如鼠标移动事件onmousemove, 滚动滚动条事件onscroll，窗口大小改变事件onresize，瞬间的操作都会导致这些事件会被高频触发。 如果事件的回调函数较为复杂，就会导致响应跟不上触发，出现页面卡顿，假死现象。 在实时检查输入时，如果我们绑定onkeyup事件发请求去服务端检查，用户输入过程中，事件的触发频率也会很高，会导致大量的请求发出，响应速度会大大跟不上触发。</p>
<h4 id="防抖"><a href="#防抖" class="headerlink" title="防抖"></a>防抖</h4><p>当持续触发事件时，一定时间段内没有再触发事件，事件处理函数才会执行一次，如果设定的时间到来<strong>之前</strong>，又一次触发了事件，就重新开始延时</p>
<p><img src="https://images2018.cnblogs.com/blog/1022151/201806/1022151-20180613144209623-862434090.jpg" alt="img"></p>
<h5 id="非立即执行版"><a href="#非立即执行版" class="headerlink" title="非立即执行版"></a><strong>非立即执行版</strong></h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timeout;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="built_in">arguments</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (timeout) <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">        </span><br><span class="line">        timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            func.apply(context, args)</span><br><span class="line">        &#125;, wait);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>非立即执行版的意思是触发事件后函数不会立即执行，而是在 n 秒后执行，如果在 n 秒内又触发了事件，则会重新计算函数执行时间。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/4842858-1f6389b9dd9e5ef9.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/1134/format/webp" alt="img"></p>
<h5 id="立即执行版"><a href="#立即执行版" class="headerlink" title="立即执行版"></a><strong>立即执行版</strong></h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func,wait</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timeout;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="built_in">arguments</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (timeout) <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> callNow = !timeout;</span><br><span class="line">        timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">            timeout = <span class="literal">null</span>;</span><br><span class="line">        &#125;, wait)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (callNow) func.apply(context, args)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>立即执行版的意思是触发事件后函数会立即执行，然后 n 秒内不触发事件才能继续执行函数的效果。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/4842858-067785c056f182d8.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/1140/format/webp" alt="img"></p>
<p>将非立即执行版和立即执行版的防抖函数结合起来，实现最终的双剑合璧版的防抖函数。</p>
<h5 id="双剑合璧版"><a href="#双剑合璧版" class="headerlink" title="双剑合璧版"></a><strong>双剑合璧版</strong></h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@desc </span>函数防抖</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>func 函数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>wait 延迟执行毫秒数</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param </span>immediate true 表立即执行，false 表非立即执行</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span>(<span class="params">func,wait,immediate</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timeout;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="built_in">arguments</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (timeout) <span class="built_in">clearTimeout</span>(timeout);</span><br><span class="line">        <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">            <span class="keyword">var</span> callNow = !timeout;</span><br><span class="line">            timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                timeout = <span class="literal">null</span>;</span><br><span class="line">            &#125;, wait)</span><br><span class="line">            <span class="keyword">if</span> (callNow) func.apply(context, args)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            timeout = <span class="built_in">setTimeout</span>(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">                func.apply(context, args)</span><br><span class="line">            &#125;, wait);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="节流"><a href="#节流" class="headerlink" title="节流"></a>节流</h4><p><strong>连续触发事件但是在 n 秒中只执行一次函数。节流会稀释函数的执行频率</strong></p>
<p><img src="https://images2018.cnblogs.com/blog/1022151/201806/1022151-20180613144342847-660853255.jpg" alt="img"></p>
<h5 id="时间戳版"><a href="#时间戳版" class="headerlink" title="时间戳版"></a>时间戳版</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> previous = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> now = <span class="built_in">Date</span>.now();</span><br><span class="line">        <span class="keyword">let</span> context = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">        <span class="keyword">if</span> (now - previous &gt; wait) &#123;</span><br><span class="line">            func.apply(context, args);</span><br><span class="line">            previous = now;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/4842858-80423b8898a27732.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/1140/format/webp" alt="img"></p>
<p>可以看到，在持续触发事件的过程中，函数会立即执行，并且每 1s 执行一次。</p>
<h5 id="定时器版"><a href="#定时器版" class="headerlink" title="定时器版:"></a>定时器版:</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">throttle</span>(<span class="params">func, wait</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> timeout;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> context = <span class="built_in">this</span>;</span><br><span class="line">        <span class="keyword">let</span> args = <span class="built_in">arguments</span>;</span><br><span class="line">        <span class="keyword">if</span> (!timeout) &#123;</span><br><span class="line">            timeout = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                timeout = <span class="literal">null</span>;</span><br><span class="line">                func.apply(context, args)</span><br><span class="line">            &#125;, wait)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/4842858-bf2ed4c8ed4f0ec0.gif?imageMogr2/auto-orient/strip%7CimageView2/2/w/1136/format/webp" alt="img"></p>
<p>可以看到，在持续触发事件的过程中，函数不会立即执行，并且每 1s 执行一次，在停止触发事件后，函数还会再执行一次。</p>
<h5 id="双剑合璧版-1"><a href="#双剑合璧版-1" class="headerlink" title="双剑合璧版"></a>双剑合璧版</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * @desc 函数节流</span><br><span class="line"> * @param func 函数</span><br><span class="line"> * @param wait 延迟执行毫秒数</span><br><span class="line"> * @param type 1 表时间戳版，2 表定时器版</span><br><span class="line"> */</span><br><span class="line">function throttle(func, wait ,type) &#123;</span><br><span class="line">    if(type===1)&#123;</span><br><span class="line">        let previous = 0;</span><br><span class="line">    &#125;else if(type===2)&#123;</span><br><span class="line">        let timeout;</span><br><span class="line">    &#125;</span><br><span class="line">    return function() &#123;</span><br><span class="line">        let context = this;</span><br><span class="line">        let args = arguments;</span><br><span class="line">        if(type===1)&#123;</span><br><span class="line">            let now = Date.now();</span><br><span class="line"></span><br><span class="line">            if (now - previous &gt; wait) &#123;</span><br><span class="line">                func.apply(context, args);</span><br><span class="line">                previous = now;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else if(type===2)&#123;</span><br><span class="line">            if (!timeout) &#123;</span><br><span class="line">                timeout = setTimeout(() =&gt; &#123;</span><br><span class="line">                    timeout = null;</span><br><span class="line">                    func.apply(context, args)</span><br><span class="line">                &#125;, wait)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Web-Notification桌面通知"><a href="#Web-Notification桌面通知" class="headerlink" title="Web Notification桌面通知"></a>Web Notification桌面通知</h3><p><a target="_blank" rel="noopener" href="https://daotin.netlify.app/gc12ta.html#%E6%9C%80%E5%90%8E">https://daotin.netlify.app/gc12ta.html#%E6%9C%80%E5%90%8E</a></p>
<h4 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h4><p>要创建一个消息通知，非常简单，直接使用 window 对象下面的<code>Notification</code>类即可，代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var n = new Notification(&quot;桌面推送&quot;, &#123;</span><br><span class="line">   icon: &#x27;img/icon.png&#x27;,</span><br><span class="line">   body: &#x27;这是我的第一条桌面通知。&#x27;,</span><br><span class="line">   image:&#x27;img/1.jpg&#x27;</span><br><span class="line">&#125;); </span><br></pre></td></tr></table></figure>

<p>于是你就会看到系统桌面弹出我上面那张截图的通知。</p>
<blockquote>
<p>PS：消息通知只有通过<code>Web服务访问</code>该页面时才会生效，如果直接双击打开本地文件，是没有任何效果的。也就是说你的文件需要使用服务器的形式打开，而不是直接使用浏览器打开本地文件。</p>
</blockquote>
<p>当然也有可能你什么都没看到，别着急继续往下看。</p>
<h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><p>当然在想要弹出上面通知之前，有必要了解一下一个通知的基本语法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let myNotification = new Notification(title, options); </span><br></pre></td></tr></table></figure>

<p><code>title</code>：定义一个通知的标题，当它被触发时，它将显示在通知窗口的顶部。</p>
<p><code>options</code>（可选）对象包含应用于通知的任何自定义设置选项。</p>
<p>常用的选项有：</p>
<ul>
<li><p>body: 通知的正文，将显示在标题下方。</p>
</li>
<li><p>tag: 类似每个通知的ID，以便在必要的时候对通知进行刷新、替换或移除。</p>
</li>
<li><p>icon:  显示通知的图标</p>
</li>
<li><p>image: 在通知正文中显示的图像的URL。</p>
</li>
<li><p>data: 您想要与通知相关联的任意数据。这可以是任何数据类型。</p>
</li>
<li><p>renotify: 一个 Boolean 指定在新通知替换旧通知后是否应通知用户。默认值为false，这意味着它们不会被通知。</p>
</li>
<li><p>requireInteraction: 表示通知应保持有效，直到用户点击或关闭它，而不是自动关闭。默认值为false。</p>
</li>
</ul>
<p>当这段代码执行时，浏览器会询问用户，是否允许该站点显示消息通知，如下图所示：</p>
<p><img src="https://raw.githubusercontent.com/Daotin/pic/master/img/20190727155108.png" alt="img"></p>
<p>只有用户点击了<code>允许</code>，授权了通知，通知才会被显示出来。</p>
<h4 id="授权"><a href="#授权" class="headerlink" title="授权"></a>授权</h4><p><em>如何获取到用户点击的是“允许”还是“阻止”呢？</em></p>
<p>window的 Notification实例有一个 <code>requestPermission</code> 函数用来获取用户的授权状态：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 首先，我们检查是否具有权限显示通知</span><br><span class="line"> // 如果没有，我们就申请权限</span><br><span class="line"> if (window.Notification &amp;&amp; Notification.permission !== &quot;granted&quot;) &#123;</span><br><span class="line">     Notification.requestPermission(function (status) &#123;</span><br><span class="line">     //status是授权状态。</span><br><span class="line">     //如果用户点击的允许，则status为&#x27;granted&#x27;</span><br><span class="line">     // 如果用户点击的禁止，则status为&#x27;denied&#x27;</span><br><span class="line">    </span><br><span class="line">     // 这将使我们能在 Chrome/Safari 中使用 Notification.permission</span><br><span class="line">     if (Notification.permission !== status) &#123;</span><br><span class="line">       Notification.permission = status;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;);</span><br><span class="line"> &#125; </span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：如果用户点击了授权右上角的关闭按钮，则status的值为default。</p>
</blockquote>
<p>之后，我们只需要判断 status 的值是否为<code>granted</code>，来决定是否显示通知。</p>
<h4 id="通知事件"><a href="#通知事件" class="headerlink" title="通知事件"></a>通知事件</h4><p>但是单纯的显示一个消息框是没有任何吸引力的，所以消息通知应该具有一定的交互性，在显示消息的前前后后都应该有事件的参与。</p>
<p>Notification一开始就制定好了一系列事件函数，开发者可以很方面的使用这些函数处理用户交互：</p>
<p>有：<code>onshow</code>,<code>onclick</code>,<code>onerror</code>,<code>onclose</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">var n = new Notification(&quot;桌面推送&quot;, &#123;</span><br><span class="line">   icon: &#x27;img/icon.png&#x27;,</span><br><span class="line">   body: &#x27;这是我的第一条桌面通知。&#x27;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//onshow函数在消息框显示时触发</span><br><span class="line">//可以做一些数据记录及定时关闭消息框等</span><br><span class="line">n.onshow = function() &#123;</span><br><span class="line">   console.log(&#x27;显示消息框&#x27;);</span><br><span class="line">   //5秒后关闭消息框</span><br><span class="line">   setTimeout(function() &#123;</span><br><span class="line">       n.close();</span><br><span class="line">   &#125;, 3000);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//消息框被点击时被调用</span><br><span class="line">//可以打开相关的视图，同时关闭该消息框等操作</span><br><span class="line">n.onclick = function() &#123;</span><br><span class="line">   console.log(&#x27;点击消息框&#x27;);</span><br><span class="line">   // 打开相关的视图</span><br><span class="line">   n.close();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//当有错误发生时会onerror函数会被调用</span><br><span class="line">//如果没有granted授权，创建Notification对象实例时，也会执行onerror函数</span><br><span class="line">n.onerror = function() &#123;</span><br><span class="line">   console.log(&#x27;消息框错误&#x27;);</span><br><span class="line">   // 做些其他的事</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//一个消息框关闭时onclose函数会被调用</span><br><span class="line">n.onclose = function() &#123;</span><br><span class="line">   console.log(&#x27;关闭消息框&#x27;);</span><br><span class="line">   //做些其他的事</span><br><span class="line">&#125;; </span><br></pre></td></tr></table></figure>

<h4 id="一个简单的例子"><a href="#一个简单的例子" class="headerlink" title="一个简单的例子"></a>一个简单的例子</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &lt;button&gt;点击发起通知&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  window.addEventListener(&quot;load&quot;, function() &#123;</span><br><span class="line">    // 首先，让我们检查我们是否有权限发出通知</span><br><span class="line">    // 如果没有，我们就请求获得权限</span><br><span class="line">    if (window.Notification &amp;&amp; Notification.permission !== &quot;granted&quot;) &#123;</span><br><span class="line">      Notification.requestPermission(function(status) &#123;</span><br><span class="line">        if (Notification.permission !== status) &#123;</span><br><span class="line">          Notification.permission = status;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    var button = document.getElementsByTagName(&quot;button&quot;)[0];</span><br><span class="line">   </span><br><span class="line">    button.addEventListener(&quot;click&quot;, function() &#123;</span><br><span class="line">      // 如果用户同意就创建一个通知</span><br><span class="line">      if (window.Notification &amp;&amp; Notification.permission === &quot;granted&quot;) &#123;</span><br><span class="line">        var n = new Notification(&quot;Hi！&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      // 如果用户没有选择是否显示通知</span><br><span class="line">      // 注：因为在 Chrome 中我们无法确定 permission 属性是否有值，因此</span><br><span class="line">      // 检查该属性的值是否是 &quot;default&quot; 是不安全的。</span><br><span class="line">      else if (window.Notification &amp;&amp; Notification.permission !== &quot;denied&quot;) &#123;</span><br><span class="line">        Notification.requestPermission(function(status) &#123;</span><br><span class="line">          if (Notification.permission !== status) &#123;</span><br><span class="line">            Notification.permission = status;</span><br><span class="line">          &#125;</span><br><span class="line">   </span><br><span class="line">          // 如果用户同意了</span><br><span class="line">          if (status === &quot;granted&quot;) &#123;</span><br><span class="line">            var n = new Notification(&quot;Hi!&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">   </span><br><span class="line">          // 否则，我们可以让步的使用常规模态的 alert</span><br><span class="line">          else &#123;</span><br><span class="line">            alert(&quot;Hi!&quot;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">   </span><br><span class="line">      // 如果用户拒绝接受通知</span><br><span class="line">      else &#123;</span><br><span class="line">        // 我们可以让步的使用常规模态的 alert</span><br><span class="line">        alert(&quot;Hi!&quot;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>当我们打开界面的时候，就会弹出授权申请，如果我们点击<code>允许</code>，然后点击按钮，就可以发送一条通知到桌面，我们就可以在桌面右下角看到这条通知。</p>
<p><img src="https://raw.githubusercontent.com/Daotin/pic/master/img/20190727155403.png" alt="img"></p>
<p>上面我们只是显示一条消息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if (status === &quot;granted&quot;) &#123;</span><br><span class="line"> var n = new Notification(&quot;Hi&quot;);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>如果我们有很多消息的话，比如我是用个for循环来模拟大量通知的情况。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for(var i=0; i&lt;10; i++) &#123;</span><br><span class="line">   var n = new Notification(&quot;Hi,&quot;+i);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>可以看到有10条通知都显示出来。但是某些情况下对于用户来说，显示大量通知是件令人痛苦的事情。</p>
<p><img src="https://raw.githubusercontent.com/Daotin/pic/master/img/20190727155632.png" alt="img"></p>
<p>比如，如果一个即时通信应用向用户提示每一条传入的消息。为了避免数以百计的不必要通知铺满用户的桌面，可能需要接管一个挂起消息的队列。</p>
<p>因此，需要为新建的通知添加一个<code>标记</code>。</p>
<p>如果有一条新通知和上一条通知具有相同的标记，那么这条新通知将会替换上一条通知，最后桌面上只会显示最新的通知。</p>
<p>还是上面的例子，只需要在触发通知加个<code>tag</code>属性即可：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for (var i = 0; i &lt; 10; i++) &#123;</span><br><span class="line">  // 最后只看到内容为 &quot;Hi! 9&quot; 的通知</span><br><span class="line">   var n = new Notification(&quot;Hi! &quot; + i, &#123;tag: &#x27;soManyNotification&#x27;&#125;);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h4 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h4><p>消息通知是个不错的特性，可是也不排除有些站点恶意的使用这个功能，一旦用户授权之后，不时的推送一些不太友好的消息，打扰用户的工作，这个时候我们可以移除该站点的权限，禁用其消息通知功能。</p>
<p><img src="https://raw.githubusercontent.com/Daotin/pic/master/img/20190727155205.png" alt="img"></p>
<p>我们可以点击浏览器地址输入框左边的叹号就有一个通知的选项，我们可以修改授权。或者在通知页面也有修改通知的选项，可以根据具体情况进行修改授权通知。</p>
<p><img src="https://raw.githubusercontent.com/Daotin/pic/master/img/20190727155225.png" alt="img"></p>
<p>于是最基本的 Web Notification 就实现了。</p>
</li>
</ol>
<h2 id="异步"><a href="#异步" class="headerlink" title="异步"></a>异步</h2><h3 id="async"><a href="#async" class="headerlink" title="async"></a><strong>async</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在async中将异步的代码同步执行</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">5</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">await</span> fn()</span><br><span class="line">  <span class="comment">// await的Promise会同步执行完</span></span><br><span class="line">  <span class="keyword">await</span>的 <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolved</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">    resolved(<span class="number">3</span>);</span><br><span class="line">  &#125;).then(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">&#125;;</span><br><span class="line">a();</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1 ​​​​​at ​quokka.js:2:2​</span><br><span class="line"></span><br><span class="line">2 ​​​​​at ​quokka.js:10:4​</span><br><span class="line"></span><br><span class="line">3 ​​​​​at ​​​v​​​ ​quokka.js:13:4​</span><br><span class="line"></span><br><span class="line">4 ​​​​​at ​quokka.js:16:2​</span><br><span class="line"></span><br><span class="line">5 ​​​​​at ​quokka.js:5:8​</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">await</span> f2()</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">6</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">8</span>);</span><br><span class="line">&#125;, <span class="number">0</span>);</span><br><span class="line">f1()</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolved</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">  resolved(<span class="number">7</span>)</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">很多人以为<span class="keyword">await</span>会一直等待之后的表达式执行完之后才会继续执行后面的代码，实际上<span class="keyword">await</span>会产生一个微任务(<span class="built_in">Promise</span>.then是微任务)。<span class="keyword">await</span>后面的函数会执行一遍，然后就会跳出整个<span class="keyword">async</span>函数来执行后面js栈的代码。等本轮事件循环执行完了之后又会跳回到<span class="keyword">async</span>函数中执行剩下的代码</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1 ​​​​​at ​​​​​​quokka.js:9:1​</span><br><span class="line"></span><br><span class="line">2 ​​​​​at ​​​​​​quokka.js:2:3​</span><br><span class="line"></span><br><span class="line">3 ​​​​​at ​​​​​​quokka.js:7:3​</span><br><span class="line"></span><br><span class="line">4 ​​​​​at ​​​​​​quokka.js:15:3​</span><br><span class="line"></span><br><span class="line">5 ​​​​​at ​​​​​​quokka.js:20:1​</span><br><span class="line"></span><br><span class="line">6 ​​​​​at ​​​​​​quokka.js:4:3​</span><br><span class="line"></span><br><span class="line">7 ​​​​​at ​​​​​​​​res​​​ ​quokka.js:18:3​</span><br><span class="line"></span><br><span class="line">8 ​​​​​at ​​​​​​quokka.js:11:3​</span><br></pre></td></tr></table></figure>

<h3 id="promise"><a href="#promise" class="headerlink" title="promise"></a><strong>promise</strong></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">    resolve(<span class="number">3</span>)</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line">a.then(<span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(index);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(a);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1 ​​​​​at ​​​​​​quokka.js:2:3​</span><br><span class="line"></span><br><span class="line">Promise &#123; &lt;pending&gt; &#125;</span><br><span class="line">  ​​​​​at ​​​​​​​​a​​​ ​quokka.js:11:1​</span><br><span class="line"></span><br><span class="line">2 ​​​​​at ​​​​​​quokka.js:4:5​</span><br><span class="line"></span><br><span class="line">3 ​​​​​at ​​​​​​​​index​​​ ​quokka.js:9:3​</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolved,reject</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">  resolved(<span class="number">2</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">  resolved(<span class="number">4</span>)</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">5</span>);</span><br><span class="line">  reject(<span class="number">4</span>)</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">res</span>)=&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">JavaScript具有<span class="string">&quot;从头到尾&quot;</span>的概念。 除非抛出错误/<span class="keyword">return</span>，否则函数将一直执行直到<span class="keyword">return</span>语句或其结尾。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1 ​​​​​at ​​​​​​quokka.js:2:3​</span><br><span class="line"></span><br><span class="line">3 ​​​​​at ​​​​​​quokka.js:4:3​</span><br><span class="line"></span><br><span class="line">5 ​​​​​at ​​​​​​quokka.js:6:3​</span><br><span class="line"></span><br><span class="line">2 ​​​​​at ​​​​​​​​res​​​ ​quokka.js:9:3​</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolved, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;x 必须为正数&#x27;</span>);</span><br><span class="line">&#125;).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;).catch(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Error: x 必须为正数] ​​​​​at ​​​​​​​​res​​​ ​quokka.js:6:3​</span><br></pre></td></tr></table></figure>

<h1 id="编程题"><a href="#编程题" class="headerlink" title="编程题"></a>编程题</h1><h2 id="时间空间复杂度"><a href="#时间空间复杂度" class="headerlink" title="时间空间复杂度"></a>时间空间复杂度</h2><p>log：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39888180/article/details/111268391">https://blog.csdn.net/weixin_39888180/article/details/111268391</a></p>
<h3 id="时间复杂度"><a href="#时间复杂度" class="headerlink" title="时间复杂度"></a>时间复杂度</h3><p>其实就是一个函数，用大 O 表示， 比如 O(1)、 O(n)…</p>
<p>它的作用就是用来<code>定义描述算法的运行时间</code></p>
<ul>
<li><strong>O(1)</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    let i = 0</span><br><span class="line">    i += 1</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>O(n)：</strong> 如果是 O(1) + O(n) 则还是 O(n)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">    for (let i = 0; i &lt; n; i += 1) &#123;</span><br><span class="line">      console.log(i)</span><br><span class="line">    &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>O(n^2)：</strong> O(n) * O(n), 也就是双层循环，自此类推：O(n^3)…</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">    for (let i = 0; i &lt; n; i += 1) &#123;</span><br><span class="line">      for (let j = 0; j &lt; n; j += 1) &#123;</span><br><span class="line">        console.log(i, j)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>O(logn)：</strong> 就是求 log 以 2 为底的多少次方等于 n</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    // 这个例子就是求2的多少次方会大于i，然后就会结束循环。 这就是一个典型的 O(logn)</span><br><span class="line">    let i = 1</span><br><span class="line">    while (i &lt; n) &#123;</span><br><span class="line">      console.log(i)</span><br><span class="line">      i *= 2</span><br><span class="line">    &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<h3 id="空间复杂度"><a href="#空间复杂度" class="headerlink" title="空间复杂度"></a>空间复杂度</h3><p>和时间复杂度一样，空间复杂度也是用大 O 表示，比如 O(1)、 O(n)…</p>
<p>它用来<code>定义描述算法运行过程中临时占用的存储空间大小</code></p>
<blockquote>
<p>占用越少 代码写的就越好</p>
</blockquote>
<ul>
<li><strong>O(1)：</strong> 单个变量，所以占用永远是 O(1)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    let i = 0</span><br><span class="line">    i += 1</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>O(n)：</strong> 声明一个数组， 添加 n 个值， 相当于占用了 n 个空间单元</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    const arr = []</span><br><span class="line">    for (let i = 0; i &lt; n; i += 1) &#123;</span><br><span class="line">      arr.push(i)</span><br><span class="line">    &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>O(n^2)：</strong> 类似一个矩阵的概念，就是二维数组的意思</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const arr = []</span><br><span class="line">for (let i = 0; i &lt; n; i += 1) &#123;</span><br><span class="line">  arr.push([])</span><br><span class="line">  for (let j = 0; j &lt; n; j += 1) &#123;</span><br><span class="line">    arr[i].push(j)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><h4 id="二分法"><a href="#二分法" class="headerlink" title="二分法"></a>二分法</h4><p>二分法查找是一种速度非常快的算法，但是它有固定的应用范围。仅当列表是有序的时候，二分查找才管用。</p>
<blockquote>
<p>采用二分法，取出中间数，数组每次和中间数比较，小的放到左边，大的放到右边</p>
</blockquote>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><h4 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h4><ul>
<li>（1）在数据集之中，找一个基准点</li>
<li>（2）建立两个数组，分别存储左边和右边的数组</li>
<li>（3）利用递归进行下次比较</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">3</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">2</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickSort</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(arr.length == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> [];    <span class="comment">// 返回空数组</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cIndex = <span class="built_in">Math</span>.floor(arr.length / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">var</span> c = arr.splice(cIndex, <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">var</span> l = [];</span><br><span class="line">    <span class="keyword">var</span> r = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(arr[i] &lt; c) &#123;</span><br><span class="line">            l.push(arr[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            r.push(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> quickSort(l).concat(c, quickSort(r));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(quickSort(arr));</span><br></pre></td></tr></table></figure>

<h2 id="深拷贝与浅拷贝"><a href="#深拷贝与浅拷贝" class="headerlink" title="深拷贝与浅拷贝"></a>深拷贝与浅拷贝</h2><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/BQ3_RJQcCZiXphMoyMRaTg">https://mp.weixin.qq.com/s/BQ3_RJQcCZiXphMoyMRaTg</a></p>
<p>基本数据类型的特点：直接存储在栈(stack)中的数据<br>引用数据类型的特点：存储的是该对象在栈中引用地址，真实的数据存放在堆内存里。引用数据类型在栈中存储了指针，指针指向堆中该实体的起始地址</p>
<p>浅拷贝只复制指向某个对象的指针，而不复制对象本身，新旧对象还是共享同一块内存。但深拷贝会另外创造一个一模一样的对象，新对象跟原对象不共享内存，修改新对象不会改到原对象。</p>
<h4 id="实现浅拷贝"><a href="#实现浅拷贝" class="headerlink" title="实现浅拷贝"></a>实现浅拷贝</h4><p>浅拷贝只拷贝基本数据的内容，引用数据虽然栈不同但会共用一个堆</p>
<h5 id="Object-assign"><a href="#Object-assign" class="headerlink" title="Object.assign()"></a>Object.assign()</h5><p><img src="https://segmentfault.com/img/bVbrl7t?w=541&h=138" alt="图片描述"></p>
<p>注意：当object只有一层的时候，是深拷贝</p>
<h5 id="展开运算符…"><a href="#展开运算符…" class="headerlink" title="展开运算符…"></a>展开运算符…</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let obj1 = &#123; name: &#x27;Kobe&#x27;, address:&#123;x:100,y:100&#125;&#125;</span><br><span class="line">let obj2= &#123;... obj1&#125;</span><br><span class="line">obj1.address.x = 200;</span><br><span class="line">obj1.name = &#x27;wade&#x27;</span><br><span class="line">console.log(&#x27;obj2&#x27;,obj2) // obj2 &#123; name: &#x27;Kobe&#x27;, address: &#123; x: 200, y: 100 &#125; &#125;</span><br></pre></td></tr></table></figure>

<h5 id="concat-2"><a href="#concat-2" class="headerlink" title="concat()"></a>concat()</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let arr = [1, 3, &#123;</span><br><span class="line">    username: &#x27;kobe&#x27;</span><br><span class="line">    &#125;];</span><br><span class="line">let arr2 = arr.concat();    </span><br><span class="line">arr2[2].username = &#x27;wade&#x27;;</span><br><span class="line">console.log(arr); //[ 1, 3, &#123; username: &#x27;wade&#x27; &#125; ]</span><br></pre></td></tr></table></figure>

<h5 id="slice-2"><a href="#slice-2" class="headerlink" title="slice()"></a>slice()</h5><p><img src="https://segmentfault.com/img/bVbrmbB?w=424&h=185" alt="图片描述"></p>
<h4 id="实现深拷贝"><a href="#实现深拷贝" class="headerlink" title="实现深拷贝"></a>实现深拷贝</h4><p><img src="https://image-static.segmentfault.com/809/484/809484289-5cb44d922e659_fix732" alt="img"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj, newObj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newObj = newObj || &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[key] == <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> isArray = <span class="built_in">Array</span>.isArray(obj[key]);<span class="comment">//判断是否数组</span></span><br><span class="line">      newObj[key] = (isArray == <span class="literal">true</span> ? [] : &#123;&#125;)</span><br><span class="line">      deepClone(obj[key], newObj[key]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      newObj[key] = obj[key]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(newObj);</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a1 = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="number">1</span> &#125; &#125;</span><br><span class="line"><span class="keyword">let</span> a2 = deepClone(a1);</span><br><span class="line">a1.a.b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a2.a);</span><br></pre></td></tr></table></figure>




<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> target;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> source === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      target = <span class="built_in">Array</span>.isArray(source) ? [] : &#123;&#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">        <span class="keyword">if</span> (source.hasOwnProperty(key)) &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> source[key] !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">            target[key] = source[key]</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            target[key] = deepClone(source[key])</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      target = source</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> a =&#123;<span class="attr">name</span>:[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>],<span class="attr">age</span>:[<span class="number">10</span>,<span class="number">15</span>],<span class="attr">book</span>:&#123;<span class="number">1</span>:[<span class="number">2</span>,<span class="number">3</span>,k]&#125;&#125;</span><br><span class="line">  <span class="keyword">let</span> b = deepClone(a)</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="built_in">console</span>.log(a == b)</span><br><span class="line">  <span class="keyword">let</span> c = a</span><br><span class="line">  <span class="built_in">console</span>.log(c)</span><br><span class="line">  <span class="built_in">console</span>.log(c == a)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(xxx))</span><br><span class="line"></span><br><span class="line">我们在使⽤ <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(xxx))时应该注意⼀下⼏点：</span><br><span class="line"><span class="number">1</span>、如果obj⾥⾯存在时间对象，<span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj))之后，时间对象变成了字符串。</span><br><span class="line"><span class="number">2</span>、如果obj⾥有<span class="built_in">RegExp</span>、<span class="built_in">Error</span>对象，则序列化的结果将只得到空对象。</span><br><span class="line"><span class="number">3</span>、如果obj⾥有函数，<span class="literal">undefined</span>，则序列化的结果会把函数， <span class="literal">undefined</span>丢失。</span><br><span class="line"><span class="number">4</span>、如果obj⾥有<span class="literal">NaN</span>、<span class="literal">Infinity</span>和-<span class="literal">Infinity</span>，则序列化的结果会变成<span class="literal">null</span>。</span><br><span class="line"><span class="number">5</span>、<span class="built_in">JSON</span>.stringify()只能序列化对象的可枚举的⾃有属性。如果obj中的对象是有构造函数⽣成的，则使⽤<span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj))</span><br><span class="line">深拷贝后，会丢弃对象的<span class="title">constructor</span>。</span><br><span class="line">6、如果对象中存在循环引⽤的情况也⽆法正确实现深拷贝。</span><br></pre></td></tr></table></figure>

<h2 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h2><h3 id="阶乘"><a href="#阶乘" class="headerlink" title="阶乘"></a>阶乘</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> factorial = <span class="function"><span class="keyword">function</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> n * factorial(n - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>f(6) = n * f(5)，所以 f(6) 需要拆解成 f(5) 子问题进行求解，以此类推 f(5) = n * f(4) ，也需要进一步拆分 … 直到 f(1)，「这是递的过程。」 f(1) 解决后，依次可以解决f(2)…. f(n)最后也被解决，「这是归的过程。」</p>
<p>归无非就是把问题拆解成具有相同解决思路的子问题，直到最后被拆解的子问题不能够拆分，这个过程是“递”。当解决了最小粒度可求解的子问题后，在“归”的过程中顺其自然的解决了最开始的问题。</p>
<p>  <strong>复杂度分析</strong></p>
<ul>
<li>空间复杂度为 O(n)</li>
<li>时间复杂度 O(2^n)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">总时间 = 子问题个数 * 解决一个子问题需要的时间</span><br></pre></td></tr></table></figure>

<ul>
<li>子问题个数即递归树中的节点总数 2^n</li>
<li>解决一个子问题需要的时间，因为只有一个加法操作 <code>fib(n-1) + fib(n-2)</code> ，所以解决一个子问题的时间为 <code>O(1)</code></li>
</ul>
<p>  二者相乘，得出算法的时间复杂度为 <code>O(2^n)</code></p>
<h3 id="实现深拷贝-1"><a href="#实现深拷贝-1" class="headerlink" title="实现深拷贝"></a>实现深拷贝</h3><p><img src="https://image-static.segmentfault.com/809/484/809484289-5cb44d922e659_fix732" alt="img"></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">obj, newObj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> newObj = newObj || &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj[key] == <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> isArray = <span class="built_in">Array</span>.isArray(obj[key]);<span class="comment">//判断是否数组</span></span><br><span class="line">      newObj[key] = (isArray == <span class="literal">true</span> ? [] : &#123;&#125;)</span><br><span class="line">      deepClone(obj[key], newObj[key]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      newObj[key] = obj[key]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(newObj);</span><br><span class="line">  <span class="keyword">return</span> newObj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> a1 = &#123; <span class="attr">a</span>: &#123; <span class="attr">b</span>: <span class="number">1</span> &#125; &#125;</span><br><span class="line"><span class="keyword">let</span> a2 = deepClone(a1);</span><br><span class="line">a1.a.b = <span class="number">2</span>;</span><br><span class="line"><span class="built_in">console</span>.log(a2.a);</span><br></pre></td></tr></table></figure>




<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepClone</span>(<span class="params">source</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> target;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> source === <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">      target = <span class="built_in">Array</span>.isArray(source) ? [] : &#123;&#125;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> source) &#123;</span><br><span class="line">        <span class="keyword">if</span> (source.hasOwnProperty(key)) &#123;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> source[key] !== <span class="string">&#x27;object&#x27;</span>) &#123;</span><br><span class="line">            target[key] = source[key]</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            target[key] = deepClone(source[key])</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      target = source</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> target</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> a =&#123;<span class="attr">name</span>:[<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>],<span class="attr">age</span>:[<span class="number">10</span>,<span class="number">15</span>],<span class="attr">book</span>:&#123;<span class="number">1</span>:[<span class="number">2</span>,<span class="number">3</span>,k]&#125;&#125;</span><br><span class="line">  <span class="keyword">let</span> b = deepClone(a)</span><br><span class="line">  <span class="built_in">console</span>.log(a)</span><br><span class="line">  <span class="built_in">console</span>.log(a == b)</span><br><span class="line">  <span class="keyword">let</span> c = a</span><br><span class="line">  <span class="built_in">console</span>.log(c)</span><br><span class="line">  <span class="built_in">console</span>.log(c == a)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(xxx))</span><br><span class="line"></span><br><span class="line">我们在使⽤ <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(xxx))时应该注意⼀下⼏点：</span><br><span class="line"><span class="number">1</span>、如果obj⾥⾯存在时间对象，<span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj))之后，时间对象变成了字符串。</span><br><span class="line"><span class="number">2</span>、如果obj⾥有<span class="built_in">RegExp</span>、<span class="built_in">Error</span>对象，则序列化的结果将只得到空对象。</span><br><span class="line"><span class="number">3</span>、如果obj⾥有函数，<span class="literal">undefined</span>，则序列化的结果会把函数， <span class="literal">undefined</span>丢失。</span><br><span class="line"><span class="number">4</span>、如果obj⾥有<span class="literal">NaN</span>、<span class="literal">Infinity</span>和-<span class="literal">Infinity</span>，则序列化的结果会变成<span class="literal">null</span>。</span><br><span class="line"><span class="number">5</span>、<span class="built_in">JSON</span>.stringify()只能序列化对象的可枚举的⾃有属性。如果obj中的对象是有构造函数⽣成的，则使⽤<span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj))</span><br><span class="line">深拷贝后，会丢弃对象的<span class="title">constructor</span>。</span><br><span class="line">6、如果对象中存在循环引⽤的情况也⽆法正确实现深拷贝。</span><br></pre></td></tr></table></figure>

<h3 id="树形结构"><a href="#树形结构" class="headerlink" title="树形结构"></a>树形结构</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> input = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;浙江&quot;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;杭州&quot;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;余杭区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;上城区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;下城区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;西湖区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;拱墅区&quot;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;绍兴&quot;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;柯桥区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;越城区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;上虞区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;新昌县&quot;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;湖北&quot;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;武汉&quot;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;江岸区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;江汉区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;硚口区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;汉阳区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;武昌区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;青山区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;洪山区&quot;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h4 id="获取树的叶子节点并赋值到树结构中"><a href="#获取树的叶子节点并赋值到树结构中" class="headerlink" title="获取树的叶子节点并赋值到树结构中"></a>获取树的叶子节点并赋值到树结构中</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> input = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;浙江&quot;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;杭州&quot;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;余杭区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;上城区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;下城区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;西湖区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;拱墅区&quot;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;绍兴&quot;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;柯桥区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;越城区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;上虞区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;新昌县&quot;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;湖北&quot;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;武汉&quot;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;江岸区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;江汉区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;硚口区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;汉阳区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;武昌区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;青山区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;洪山区&quot;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">process</span>(<span class="params">input</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getLeafCountTree</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!arr.children) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      arr.leafCount = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.children.length; i++) &#123;</span><br><span class="line">        arr.leafCount = arr.leafCount + getLeafCountTree(arr.children[i]);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//需要将次层的叶子节点return给父级</span></span><br><span class="line">      <span class="keyword">return</span> arr.leafCount;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">finalQuery</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//因为是数组，不是树形结构，需要以树形结构处理</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> r = <span class="number">0</span>; r &lt; input.length; r++) &#123;</span><br><span class="line">      getLeafCountTree(input[r]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  finalQuery();</span><br><span class="line">  <span class="keyword">return</span> input</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(process(input));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> output = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;浙江&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;浙江&quot;</span>,</span><br><span class="line">    <span class="attr">leafCount</span>: <span class="number">9</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;杭州&quot;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;浙江-杭州&quot;</span>,</span><br><span class="line">        <span class="attr">leafCount</span>: <span class="number">5</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;余杭区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;浙江-杭州-余杭区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;上城区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;浙江-杭州-上城区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;下城区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;浙江-杭州-下城区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;西湖区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;浙江-杭州-西湖区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;拱墅区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;浙江-杭州-拱墅区&quot;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;绍兴&quot;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;浙江-绍兴&quot;</span>,</span><br><span class="line">        <span class="attr">leafCount</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;柯桥区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;浙江-绍兴-柯桥区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;越城区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;浙江-绍兴-越城区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;上虞区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;浙江-绍兴-上虞区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;新昌县&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;浙江-绍兴-新昌县&quot;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;湖北&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;湖北&quot;</span>,</span><br><span class="line">    <span class="attr">leafCount</span>: <span class="number">7</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;武汉&quot;</span>,</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;湖北-武汉&quot;</span>,</span><br><span class="line">        <span class="attr">leafCount</span>: <span class="number">7</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;江岸区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;湖北-武汉-江岸区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;江汉区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;湖北-武汉-江汉区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;硚口区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;湖北-武汉-硚口区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;汉阳区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;湖北-武汉-汉阳区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;武昌区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;湖北-武汉-武昌区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;青山区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;湖北-武汉-青山区&quot;</span> &#125;,</span><br><span class="line">          &#123; <span class="attr">name</span>: <span class="string">&quot;洪山区&quot;</span>, <span class="attr">path</span>: <span class="string">&quot;湖北-武汉-洪山区&quot;</span> &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<h4 id="根据id，拿到id数组"><a href="#根据id，拿到id数组" class="headerlink" title="根据id，拿到id数组"></a>根据id，拿到id数组</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// (tree为目标树，targetId为目标节点id)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getNodeRoute</span>(<span class="params">tree, targetId</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> nodePathArray = []</span><br><span class="line">  <span class="keyword">let</span> fn = <span class="function">(<span class="params">tree, targetId</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> index = <span class="number">0</span>; index &lt; tree.length; index++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (tree[index].children) &#123;</span><br><span class="line">        <span class="keyword">let</span> endRecursiveLoop = fn(tree[index].children, targetId)</span><br><span class="line">        <span class="keyword">if</span> (endRecursiveLoop) &#123;</span><br><span class="line">          nodePathArray.push(tree[index].name)</span><br><span class="line">          <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (tree[index].name === targetId) &#123;</span><br><span class="line">        nodePathArray.push(tree[index].name)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  fn(tree, targetId)</span><br><span class="line">  <span class="keyword">return</span> nodePathArray;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getNodeRoute(input, <span class="string">&#x27;余杭区&#x27;</span>)</span><br><span class="line"><span class="built_in">console</span>.log(getNodeRoute(input, <span class="string">&#x27;余杭区&#x27;</span>).reverse());</span><br><span class="line"><span class="comment">//[ &#x27;浙江&#x27;, &#x27;杭州&#x27;, &#x27;余杭区&#x27; ]</span></span><br></pre></td></tr></table></figure>

<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><ul>
<li><p>使用递归实现<code>getElementsByClassName</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">byClass</span>(<span class="params">node, className, arr</span>)</span>&#123;</span><br><span class="line">       <span class="comment">//得到传入节点的所有子节点</span></span><br><span class="line">       <span class="keyword">var</span> lists = node.childNodes;</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>;i&lt; lists.length;i++)&#123;</span><br><span class="line">           <span class="comment">//判断是否有相同className元素</span></span><br><span class="line">           <span class="keyword">if</span>(arr[i],className == className)&#123;</span><br><span class="line">               arr.push(arr[i]);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//判断子节点是否还有子节点</span></span><br><span class="line">           <span class="keyword">if</span>(arr[i].childNodes.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">               byClass(arr[i],className,arr);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure></li>
<li><p>有一堆桃子，每天吃掉一半，挑出一个坏的扔掉，第6天的时候发现还剩1个桃子，问原来有多少个桃子。</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (n === <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">var</span> a = (fn(n - <span class="number">1</span>) + <span class="number">1</span>) * <span class="number">2</span></span><br><span class="line">  <span class="keyword">return</span> a</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(fn(<span class="number">2</span>)) <span class="comment">//190</span></span><br></pre></td></tr></table></figure>
<h1 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h1><p>将浏览器的前进按钮禁止</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将浏览器的前进按钮禁止</span></span><br><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">&quot;jquery&quot;</span>;</span><br><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.history &amp;&amp; <span class="built_in">window</span>.history.pushState) &#123;</span><br><span class="line">    $(<span class="built_in">window</span>).on(<span class="string">&#x27;popstate&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// console.log(window.location.href)</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">window</span>.location.href.indexOf(<span class="built_in">window</span>.location.origin + <span class="string">&quot;/wechatpub/surveyOne&quot;</span>)&gt;-<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">// console.log(window.location.href,&quot;==========================&quot;)</span></span><br><span class="line">        <span class="built_in">window</span>.history.pushState(<span class="string">&#x27;forward&#x27;</span>, <span class="literal">null</span>, <span class="string">&#x27;#&#x27;</span>);</span><br><span class="line">        <span class="built_in">window</span>.history.forward(<span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// window.history.pushState(&#x27;forward&#x27;, null, &#x27;#&#x27;); //在IE中必须得有这两行</span></span><br><span class="line">  <span class="comment">// window.history.forward(1);</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="业务问题"><a href="#业务问题" class="headerlink" title="业务问题"></a>业务问题</h1><h2 id="AntD"><a href="#AntD" class="headerlink" title="AntD"></a>AntD</h2><h3 id="Form"><a href="#Form" class="headerlink" title="Form"></a>Form</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">rules=&#123;[</span><br><span class="line">    (&#123; getFieldValue &#125;) =&gt; (&#123;</span><br><span class="line">        validator(_, value) &#123;</span><br><span class="line">        if (value.valueOf() &gt; getFieldValue(&#x27;onlineTime&#x27;).valueOf() 					|| !value) &#123;</span><br><span class="line">        	return Promise.resolve();</span><br><span class="line">        &#125;</span><br><span class="line">        return Promise.reject(new Error(&#x27;上线时间大于当前时间&#x27;));</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">]&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const formRef = useRef&lt;any&gt;();</span><br><span class="line">formRef.current.setFieldsValue(&#123;</span><br><span class="line">    putNum: state.crowdData.putNum,</span><br><span class="line">    putPhone: state.crowdData.putPhone,</span><br><span class="line">    putEmail: state.crowdData.putEmail</span><br><span class="line">&#125;)</span><br><span class="line">&lt;Form ref=&#123;formRef&#125; initialValues=&#123;initialValues&#125; &#123;...Formlayout&#125;&gt;&lt;Form&gt;</span><br></pre></td></tr></table></figure>

<h3 id="upload"><a href="#upload" class="headerlink" title="upload"></a>upload</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> uploadProps = &#123;</span><br><span class="line">  <span class="comment">// name: &quot;file&quot;,</span></span><br><span class="line">  <span class="attr">action</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">accept</span>: <span class="string">&quot;.doc, .docx&quot;</span>,</span><br><span class="line">  <span class="attr">multiple</span>: <span class="literal">false</span>, <span class="comment">//是否支持多选文件</span></span><br><span class="line">  <span class="attr">fileList</span>: uploadTypeList,</span><br><span class="line">  <span class="attr">showUploadList</span>: &#123;</span><br><span class="line">    <span class="attr">showDownloadIcon</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">downloadIcon</span>: <span class="string">&#x27;download &#x27;</span>,</span><br><span class="line">    <span class="attr">showRemoveIcon</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">removeIcon</span>: <span class="xml"><span class="tag">&lt;<span class="name">i</span> <span class="attr">className</span>=<span class="string">&#x27;iconfont iconshanchu3&#x27;</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span> =&gt;</span> removeIcon()&#125;/&gt;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">iconRender</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#123;</span>`$&#123;<span class="attr">PUBLIC_CDN_URL</span>&#125;/<span class="attr">images</span>/<span class="attr">dashboard</span>/<span class="attr">upload_file.png</span>`&#125; <span class="attr">alt</span>=<span class="string">&#x27;&#x27;</span> 			<span class="attr">className</span>=<span class="string">&#123;styles.upload_file&#125;/</span>&gt;</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">onRemove</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    setUploadTypeList([])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">onChange</span>(<span class="params">info</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(info, uploadTypeList)</span><br><span class="line">    <span class="keyword">let</span> ext = info.file.name ? info.file.name.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">1</span>] : <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> reg = <span class="regexp">/[*&amp;&lt;&gt;%?:;\\/|&quot;]/im</span></span><br><span class="line">    <span class="keyword">if</span> (ext) &#123;</span><br><span class="line">      <span class="keyword">if</span> (!(ext === <span class="string">&#x27;doc&#x27;</span> || ext === <span class="string">&#x27;docx&#x27;</span>)) &#123;</span><br><span class="line">        message.error(<span class="string">&#x27;您只能上传doc，docx 文件!&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (reg.test(info.file.name)) &#123;</span><br><span class="line">        message.error(<span class="string">&#x27;文件名不能包含下列任何字符串：* &amp; &lt; &gt; % ? : ; \\ / | &quot;&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        message.loading(&#123; <span class="attr">content</span>: <span class="string">&#x27;文件上传中...&#x27;</span>, <span class="attr">key</span>: <span class="string">&#x27;export&#x27;</span> &#125;);</span><br><span class="line">        <span class="keyword">const</span> formData = <span class="keyword">new</span> FormData();</span><br><span class="line">        formData.append(<span class="string">&#x27;file_upload&#x27;</span>, info.file);</span><br><span class="line">        <span class="built_in">console</span>.log(info, uploadTypeList)</span><br><span class="line">        <span class="comment">// setUploadLocalList([info.file])</span></span><br><span class="line">        <span class="comment">// uploadTopic.run(formData);</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://tomorrowlm.github.io">LMTomorrow</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://tomorrowlm.github.io/2020/09/25/03-%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98/">https://tomorrowlm.github.io/2020/09/25/03-%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://tomorrowlm.github.io" target="_blank">TomorrowLM-Web</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%AE%9E%E6%88%98/">实战</a><a class="post-meta__tags" href="/tags/%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5/">代码片段</a></div><div class="post_share"><div class="social-share" data-image="/img/cover_1.gif" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/09/25/08-app/" title="app"><img class="cover" src="/img/cover_1.gif" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">app</div></div></a></div><div class="next-post pull-right"><a href="/2020/09/25/06-vue/" title="vue"><img class="cover" src="/img/cover_1.gif" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">vue</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">LMTomorrow</div><div class="author-info__description">热爱</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">10</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">44</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/TomorrowLM"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%90%88%E9%9B%86%E6%94%B6%E8%97%8F"><span class="toc-number">1.</span> <span class="toc-text">代码合集收藏</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#css"><span class="toc-number">2.</span> <span class="toc-text">css</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%92%99%E7%89%88"><span class="toc-number">2.1.</span> <span class="toc-text">蒙版</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E8%A7%92%E5%BD%A2"><span class="toc-number">2.2.</span> <span class="toc-text">三角形</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#js"><span class="toc-number">3.</span> <span class="toc-text">js</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-number">3.1.</span> <span class="toc-text">内置方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Math"><span class="toc-number">3.1.1.</span> <span class="toc-text">Math</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#round"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">round</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Math-trunc"><span class="toc-number">3.1.1.2.</span> <span class="toc-text">Math.trunc()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Math-sign"><span class="toc-number">3.1.1.3.</span> <span class="toc-text">Math.sign()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Math-cbrt"><span class="toc-number">3.1.1.4.</span> <span class="toc-text">Math.cbrt()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E6%88%98"><span class="toc-number">3.1.1.5.</span> <span class="toc-text">实战</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E4%BB%8EminNum%E5%88%B0maxNum%E7%9A%84%E9%9A%8F%E6%9C%BA%E6%95%B0"><span class="toc-number">3.1.1.5.1.</span> <span class="toc-text">生成从minNum到maxNum的随机数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Date"><span class="toc-number">3.1.2.</span> <span class="toc-text">Date</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#new-Date-%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84%E6%97%A5%E6%9C%9F%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.1.2.1.</span> <span class="toc-text">**new Date()**创建新的日期对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%97%A5%E6%9C%9F%E6%96%B9%E6%B3%95"><span class="toc-number">3.1.2.2.</span> <span class="toc-text">获取日期方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E8%AE%BE%E7%BD%AE%E6%96%B9%E6%B3%95"><span class="toc-number">3.1.2.3.</span> <span class="toc-text">日期设置方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E5%8C%96%E4%B8%BA%E6%97%A5%E6%9C%9F%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">3.1.2.4.</span> <span class="toc-text">时间戳转化为日期的方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#console"><span class="toc-number">3.1.3.</span> <span class="toc-text">console</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#defer%E5%92%8Casync"><span class="toc-number">3.1.4.</span> <span class="toc-text">defer和async</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#setTimeout"><span class="toc-number">3.1.5.</span> <span class="toc-text">setTimeout</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MutationObserver"><span class="toc-number">3.1.6.</span> <span class="toc-text">MutationObserver</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.2.</span> <span class="toc-text">数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#number"><span class="toc-number">3.2.1.</span> <span class="toc-text">number</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%88%A4%E6%96%AD%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.2.1.1.</span> <span class="toc-text">数值判断转换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E6%88%98-1"><span class="toc-number">3.2.1.2.</span> <span class="toc-text">实战</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%88%96%E8%80%85%E6%95%B0%E5%AD%97%E6%98%AF%E5%90%A6%E6%98%AF%E6%AD%A3%E6%95%B4%E6%95%B0"><span class="toc-number">3.2.1.2.1.</span> <span class="toc-text">判断字符串或者数字是否是正整数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">3.2.2.</span> <span class="toc-text">字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#charAt"><span class="toc-number">3.2.2.1.</span> <span class="toc-text">charAt</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#indexOf"><span class="toc-number">3.2.2.2.</span> <span class="toc-text">indexOf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lastIndexOf"><span class="toc-number">3.2.2.3.</span> <span class="toc-text">lastIndexOf</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#concat"><span class="toc-number">3.2.2.4.</span> <span class="toc-text">concat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#slice"><span class="toc-number">3.2.2.5.</span> <span class="toc-text">slice</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#substring"><span class="toc-number">3.2.2.6.</span> <span class="toc-text">substring</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#substr"><span class="toc-number">3.2.2.7.</span> <span class="toc-text">substr</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#trim"><span class="toc-number">3.2.2.8.</span> <span class="toc-text">trim</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#toLocaleUpperCase"><span class="toc-number">3.2.2.9.</span> <span class="toc-text">toLocaleUpperCase</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#split"><span class="toc-number">3.2.2.10.</span> <span class="toc-text">split</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#includes-ES6"><span class="toc-number">3.2.2.11.</span> <span class="toc-text">includes(ES6)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#endsWith-ES6"><span class="toc-number">3.2.2.12.</span> <span class="toc-text">endsWith(ES6)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E6%88%98-2"><span class="toc-number">3.2.2.13.</span> <span class="toc-text">实战</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%BE%E5%88%B0%E7%AC%AC%E4%B8%80%E4%B8%AA%E4%B8%8D%E9%87%8D%E5%A4%8D%E7%9A%84%E5%AD%97%E7%AC%A6%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E5%AE%83%E7%9A%84%E7%B4%A2%E5%BC%95"><span class="toc-number">3.2.2.13.1.</span> <span class="toc-text">找到第一个不重复的字符，并返回它的索引</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">3.2.3.</span> <span class="toc-text">数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%9A%E6%94%B9%E5%8F%98%E5%8E%9F%E6%9D%A5%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%89%EF%BC%9A"><span class="toc-number">3.2.3.1.</span> <span class="toc-text">会改变原来数组的有：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#pop"><span class="toc-number">3.2.3.1.1.</span> <span class="toc-text">pop()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#push"><span class="toc-number">3.2.3.1.2.</span> <span class="toc-text">push()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#shift"><span class="toc-number">3.2.3.1.3.</span> <span class="toc-text">shift()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#unshift"><span class="toc-number">3.2.3.1.4.</span> <span class="toc-text">unshift()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#reverse"><span class="toc-number">3.2.3.1.5.</span> <span class="toc-text">reverse()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#sort"><span class="toc-number">3.2.3.1.6.</span> <span class="toc-text">sort()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#splice"><span class="toc-number">3.2.3.1.7.</span> <span class="toc-text">splice()</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E4%BC%9A%E6%94%B9%E5%8F%98%E5%8E%9F%E6%9D%A5%E6%95%B0%E7%BB%84%E7%9A%84%E6%9C%89%EF%BC%9A"><span class="toc-number">3.2.3.2.</span> <span class="toc-text">不会改变原来数组的有：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#indexOf%E5%92%8ClastIndexOf"><span class="toc-number">3.2.3.2.1.</span> <span class="toc-text">indexOf和lastIndexOf</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#concat-1"><span class="toc-number">3.2.3.2.2.</span> <span class="toc-text">concat()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#join"><span class="toc-number">3.2.3.2.3.</span> <span class="toc-text">join()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#slice-1"><span class="toc-number">3.2.3.2.4.</span> <span class="toc-text">slice()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#toString%E5%92%8CtoLocaleString"><span class="toc-number">3.2.3.2.5.</span> <span class="toc-text">toString和toLocaleString</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ES6"><span class="toc-number">3.2.3.3.</span> <span class="toc-text">ES6</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#from"><span class="toc-number">3.2.3.3.1.</span> <span class="toc-text">from</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Array-of"><span class="toc-number">3.2.3.3.2.</span> <span class="toc-text">Array.of</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#copyWithin"><span class="toc-number">3.2.3.3.3.</span> <span class="toc-text">copyWithin</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#find%E5%92%8CfindIndex"><span class="toc-number">3.2.3.3.4.</span> <span class="toc-text">find和findIndex</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#fill"><span class="toc-number">3.2.3.3.5.</span> <span class="toc-text">fill()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#entries%E5%92%8Ckeys%E5%92%8Cvalues"><span class="toc-number">3.2.3.3.6.</span> <span class="toc-text">entries和keys和values</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#includes"><span class="toc-number">3.2.3.3.7.</span> <span class="toc-text">includes()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E7%A9%BA%E4%BD%8D"><span class="toc-number">3.2.3.3.8.</span> <span class="toc-text">数组的空位</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E6%88%98-3"><span class="toc-number">3.2.3.4.</span> <span class="toc-text">实战</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E6%95%B0%E7%BB%84%E9%95%BF%E5%BA%A6%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E4%B8%80%E6%A0%B7%E9%95%BF%E5%BA%A6%E7%9A%84%E6%95%B0%E7%BB%84%E5%B9%B6%E5%88%9D%E5%A7%8B%E5%8C%96%E5%80%BC%E4%B8%BA0"><span class="toc-number">3.2.3.4.1.</span> <span class="toc-text">根据数组长度创建一个一样长度的数组并初始化值为0</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E4%B8%80%E4%B8%AA%E9%9A%8F%E6%9C%BA%E5%80%BC"><span class="toc-number">3.2.3.4.2.</span> <span class="toc-text">选择一个随机值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D"><span class="toc-number">3.2.3.4.3.</span> <span class="toc-text">数组去重</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E4%B8%AD%E6%9C%80%E5%A4%A7%E5%85%83%E7%B4%A0%E7%9A%84%E4%B8%8B%E6%A0%87"><span class="toc-number">3.2.3.4.4.</span> <span class="toc-text">数组中最大元素的下标</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%BE%E5%87%BA%E6%95%B0%E7%BB%84%E4%B8%AD%E5%87%BA%E7%8E%B0%E6%9C%80%E5%A4%9A%E7%9A%84%E5%85%83%E7%B4%A0%E5%92%8C%E6%AC%A1%E6%95%B0"><span class="toc-number">3.2.3.4.5.</span> <span class="toc-text">找出数组中出现最多的元素和次数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.2.3.4.6.</span> <span class="toc-text">数组对象</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E5%8E%BB%E9%87%8D"><span class="toc-number">3.2.3.4.6.1.</span> <span class="toc-text">数组对象去重</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E4%B8%A4%E4%B8%AA%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1%E6%98%AF%E5%90%A6%E7%9B%B8%E7%AD%89"><span class="toc-number">3.2.3.4.6.2.</span> <span class="toc-text">判断两个数组对象是否相等</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%81%8D%E5%8E%86"><span class="toc-number">3.3.</span> <span class="toc-text">遍历</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84-1"><span class="toc-number">3.3.1.</span> <span class="toc-text">数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#forEach"><span class="toc-number">3.3.1.1.</span> <span class="toc-text">forEach()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#map"><span class="toc-number">3.3.1.2.</span> <span class="toc-text">map()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#every"><span class="toc-number">3.3.1.3.</span> <span class="toc-text">every()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#some"><span class="toc-number">3.3.1.4.</span> <span class="toc-text">some()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#filter"><span class="toc-number">3.3.1.5.</span> <span class="toc-text">filter()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#reduce"><span class="toc-number">3.3.1.6.</span> <span class="toc-text">reduce()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#entries"><span class="toc-number">3.3.1.7.</span> <span class="toc-text">entries()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#keys"><span class="toc-number">3.3.1.8.</span> <span class="toc-text">keys</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#values"><span class="toc-number">3.3.1.9.</span> <span class="toc-text">values()</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#for"><span class="toc-number">3.3.1.10.</span> <span class="toc-text">for</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.3.2.</span> <span class="toc-text">对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#for%E2%80%A6in"><span class="toc-number">3.3.2.1.</span> <span class="toc-text">for…in</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.</span> <span class="toc-text">构造函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8C%96"><span class="toc-number">3.5.</span> <span class="toc-text">数据转化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.5.0.1.</span> <span class="toc-text">自动转换</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B5%8B%E5%80%BC"><span class="toc-number">3.5.0.1.1.</span> <span class="toc-text">赋值</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%8D%E5%85%A8%E7%AD%89"><span class="toc-number">3.5.0.1.1.1.</span> <span class="toc-text">不全等</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%85%A8%E7%AD%89"><span class="toc-number">3.5.0.1.1.2.</span> <span class="toc-text">全等</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%BD%AC%E6%8D%A2%E5%B8%83%E5%B0%94%E5%80%BC"><span class="toc-number">3.5.0.1.2.</span> <span class="toc-text">自动转换布尔值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%BD%AC%E6%8D%A2%E4%B8%BA%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">3.5.0.1.3.</span> <span class="toc-text">自动转换为字符串</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%BD%AC%E6%8D%A2%E4%B8%BA%E6%95%B0%E5%80%BC"><span class="toc-number">3.5.0.1.4.</span> <span class="toc-text">自动转换为数值</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.5.0.2.</span> <span class="toc-text">强制转换</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Number"><span class="toc-number">3.5.0.2.1.</span> <span class="toc-text">Number</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#string"><span class="toc-number">3.5.0.2.2.</span> <span class="toc-text">string</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Boolean"><span class="toc-number">3.5.0.2.3.</span> <span class="toc-text">Boolean</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.6.</span> <span class="toc-text">判断数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1%E3%80%81typeof"><span class="toc-number">3.6.0.0.1.</span> <span class="toc-text">1、typeof</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2%E3%80%81instanceof"><span class="toc-number">3.6.0.0.2.</span> <span class="toc-text">2、instanceof</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3%E3%80%81constructor"><span class="toc-number">3.6.0.0.3.</span> <span class="toc-text">3、constructor</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4%E3%80%81toString"><span class="toc-number">3.6.0.0.4.</span> <span class="toc-text">4、toString</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%BC%E5%AE%B9%E6%80%A7"><span class="toc-number">3.7.</span> <span class="toc-text">兼容性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9E%E5%88%B0%E9%A1%B6%E9%83%A8"><span class="toc-number">3.8.</span> <span class="toc-text">回到顶部</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4"><span class="toc-number">3.9.</span> <span class="toc-text">时间</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BA%AFjs"><span class="toc-number">3.9.1.</span> <span class="toc-text">纯js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#moment"><span class="toc-number">3.9.2.</span> <span class="toc-text">moment</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96url%E7%9A%84%E5%8F%82%E6%95%B0"><span class="toc-number">3.10.</span> <span class="toc-text">获取url的参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E8%BD%AC%E6%8D%A2%E4%B8%BAJSON%E6%95%B0%E6%8D%AE"><span class="toc-number">3.11.</span> <span class="toc-text">数组转换为JSON数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setTimeout-1"><span class="toc-number">3.12.</span> <span class="toc-text">setTimeout</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%BE%AA%E7%8E%AF%E4%B8%AD%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="toc-number">3.13.</span> <span class="toc-text">数组循环中删除元素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1"><span class="toc-number">3.14.</span> <span class="toc-text">业务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B2%E6%8A%96-%E8%8A%82%E6%B5%81"><span class="toc-number">3.14.1.</span> <span class="toc-text">防抖&#x2F;节流</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%98%B2%E6%8A%96"><span class="toc-number">3.14.1.1.</span> <span class="toc-text">防抖</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9D%9E%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C%E7%89%88"><span class="toc-number">3.14.1.1.1.</span> <span class="toc-text">非立即执行版</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AB%8B%E5%8D%B3%E6%89%A7%E8%A1%8C%E7%89%88"><span class="toc-number">3.14.1.1.2.</span> <span class="toc-text">立即执行版</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8C%E5%89%91%E5%90%88%E7%92%A7%E7%89%88"><span class="toc-number">3.14.1.1.3.</span> <span class="toc-text">双剑合璧版</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8A%82%E6%B5%81"><span class="toc-number">3.14.1.2.</span> <span class="toc-text">节流</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E6%88%B3%E7%89%88"><span class="toc-number">3.14.1.2.1.</span> <span class="toc-text">时间戳版</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E7%89%88"><span class="toc-number">3.14.1.2.2.</span> <span class="toc-text">定时器版:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8C%E5%89%91%E5%90%88%E7%92%A7%E7%89%88-1"><span class="toc-number">3.14.1.2.3.</span> <span class="toc-text">双剑合璧版</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Web-Notification%E6%A1%8C%E9%9D%A2%E9%80%9A%E7%9F%A5"><span class="toc-number">3.14.2.</span> <span class="toc-text">Web Notification桌面通知</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%A7%8B"><span class="toc-number">3.14.2.1.</span> <span class="toc-text">开始</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">3.14.2.2.</span> <span class="toc-text">基本语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%88%E6%9D%83"><span class="toc-number">3.14.2.3.</span> <span class="toc-text">授权</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E7%9F%A5%E4%BA%8B%E4%BB%B6"><span class="toc-number">3.14.2.4.</span> <span class="toc-text">通知事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BE%8B%E5%AD%90"><span class="toc-number">3.14.2.5.</span> <span class="toc-text">一个简单的例子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E5%90%8E"><span class="toc-number">3.14.2.6.</span> <span class="toc-text">最后</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5"><span class="toc-number">3.15.</span> <span class="toc-text">异步</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#async"><span class="toc-number">3.15.1.</span> <span class="toc-text">async</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#promise"><span class="toc-number">3.15.2.</span> <span class="toc-text">promise</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BC%96%E7%A8%8B%E9%A2%98"><span class="toc-number">4.</span> <span class="toc-text">编程题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6"><span class="toc-number">4.1.</span> <span class="toc-text">时间空间复杂度</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6"><span class="toc-number">4.1.1.</span> <span class="toc-text">时间复杂度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6"><span class="toc-number">4.1.2.</span> <span class="toc-text">空间复杂度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE"><span class="toc-number">4.1.3.</span> <span class="toc-text">查找</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C%E5%88%86%E6%B3%95"><span class="toc-number">4.1.3.1.</span> <span class="toc-text">二分法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">4.1.4.</span> <span class="toc-text">排序</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F"><span class="toc-number">4.1.4.1.</span> <span class="toc-text">快速排序</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">4.2.</span> <span class="toc-text">深拷贝与浅拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">4.2.0.1.</span> <span class="toc-text">实现浅拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Object-assign"><span class="toc-number">4.2.0.1.1.</span> <span class="toc-text">Object.assign()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B1%95%E5%BC%80%E8%BF%90%E7%AE%97%E7%AC%A6%E2%80%A6"><span class="toc-number">4.2.0.1.2.</span> <span class="toc-text">展开运算符…</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#concat-2"><span class="toc-number">4.2.0.1.3.</span> <span class="toc-text">concat()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#slice-2"><span class="toc-number">4.2.0.1.4.</span> <span class="toc-text">slice()</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">4.2.0.2.</span> <span class="toc-text">实现深拷贝</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%92%E5%BD%92"><span class="toc-number">4.3.</span> <span class="toc-text">递归</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E4%B9%98"><span class="toc-number">4.3.1.</span> <span class="toc-text">阶乘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%B7%B1%E6%8B%B7%E8%B4%9D-1"><span class="toc-number">4.3.2.</span> <span class="toc-text">实现深拷贝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84"><span class="toc-number">4.3.3.</span> <span class="toc-text">树形结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%A0%91%E7%9A%84%E5%8F%B6%E5%AD%90%E8%8A%82%E7%82%B9%E5%B9%B6%E8%B5%8B%E5%80%BC%E5%88%B0%E6%A0%91%E7%BB%93%E6%9E%84%E4%B8%AD"><span class="toc-number">4.3.3.1.</span> <span class="toc-text">获取树的叶子节点并赋值到树结构中</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AEid%EF%BC%8C%E6%8B%BF%E5%88%B0id%E6%95%B0%E7%BB%84"><span class="toc-number">4.3.3.2.</span> <span class="toc-text">根据id，拿到id数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">4.3.3.3.</span> <span class="toc-text">案例</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text">浏览器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-number">6.</span> <span class="toc-text">业务问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#AntD"><span class="toc-number">6.1.</span> <span class="toc-text">AntD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Form"><span class="toc-number">6.1.1.</span> <span class="toc-text">Form</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#upload"><span class="toc-number">6.1.2.</span> <span class="toc-text">upload</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/05/30/%E8%AE%A1%E7%AE%97%E6%9C%BA/" title="计算机"><img src="/img/cover_1.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机"/></a><div class="content"><a class="title" href="/2023/05/30/%E8%AE%A1%E7%AE%97%E6%9C%BA/" title="计算机">计算机</a><time datetime="2023-05-30T03:39:50.217Z" title="发表于 2023-05-30 11:39:50">2023-05-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/30/01-%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/" title="项目构建"><img src="/img/cover_1.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="项目构建"/></a><div class="content"><a class="title" href="/2023/05/30/01-%E9%A1%B9%E7%9B%AE%E6%9E%84%E5%BB%BA/" title="项目构建">项目构建</a><time datetime="2023-05-30T03:39:46.242Z" title="发表于 2023-05-30 11:39:46">2023-05-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/05/30/00-%E5%8E%9F%E7%90%86%E5%92%8C%E6%BA%90%E7%A0%81/" title="前端原理和源码"><img src="/img/cover_1.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端原理和源码"/></a><div class="content"><a class="title" href="/2023/05/30/00-%E5%8E%9F%E7%90%86%E5%92%8C%E6%BA%90%E7%A0%81/" title="前端原理和源码">前端原理和源码</a><time datetime="2023-05-30T03:39:46.239Z" title="发表于 2023-05-30 11:39:46">2023-05-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/09/25/08-app/" title="app"><img src="/img/cover_1.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="app"/></a><div class="content"><a class="title" href="/2020/09/25/08-app/" title="app">app</a><time datetime="2020-09-24T16:00:00.000Z" title="发表于 2020-09-25 00:00:00">2020-09-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/09/25/03-%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98/" title="代码片段"><img src="/img/cover_1.gif" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="代码片段"/></a><div class="content"><a class="title" href="/2020/09/25/03-%E4%BB%A3%E7%A0%81%E5%AE%9E%E6%88%98/" title="代码片段">代码片段</a><time datetime="2020-09-24T16:00:00.000Z" title="发表于 2020-09-25 00:00:00">2020-09-25</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/cover_1.gif')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By LMTomorrow</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">因为热爱，所以专注</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '6bfdb22315df9b919429',
      clientSecret: '80fa5ba42986f3960283146c3faf03bc34beb4ab',
      repo: 'TomorrowLM.github.io',
      owner: 'TomorrowLM',
      admin: ['TomorrowLM'],
      id: '7da014bb7a2d24467b39e6f23f2384a4',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.textContent= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><div class="aplayer no-destroy" data-id="4929980436" data-server="netease" data-type="playlist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="false" muted></div><script src="/js/custom.js"></script><script data-pjax src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="false"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && location.pathname =='/'){
    
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/cover_1.gif" alt="/img/cover_1.gif"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-05-30</span><a class="blog-slider__title" href="2023/05/30/01-项目构建/">项目构建</a><div class="blog-slider__text">webpack,优化,项目构建,规范,业务,npm,git</div><a class="blog-slider__button" href="2023/05/30/01-项目构建/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/cover_1.gif" alt="/img/cover_1.gif"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-05-30</span><a class="blog-slider__title" href="2023/05/30/00-原理和源码/">前端原理和源码</a><div class="blog-slider__text">vue,webpack,响应式,路由,响应式,diff</div><a class="blog-slider__button" href="2023/05/30/00-原理和源码/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/cover_1.gif" alt="/img/cover_1.gif"/></div><div class="blog-slider__content"><span class="blog-slider__code">2020-09-25</span><a class="blog-slider__title" href="2020/09/25/02-总结/">总结</a><div class="blog-slider__text">关于一些实战常用的html,css,es5的总结！经验</div><a class="blog-slider__button" href="2020/09/25/02-总结/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/cover_1.gif" alt="/img/cover_1.gif"/></div><div class="blog-slider__content"><span class="blog-slider__code">2020-09-25</span><a class="blog-slider__title" href="2020/09/25/04-ES6和TS/">ES6，TS和设计模式</a><div class="blog-slider__text">ES6,TS,设计模式</div><a class="blog-slider__button" href="2020/09/25/04-ES6和TS/">详情</a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms"><div class="blog-slider__img"><img src="/img/cover_1.gif" alt="/img/cover_1.gif"/></div><div class="blog-slider__content"><span class="blog-slider__code">2023-05-30</span><a class="blog-slider__title" href="2023/05/30/计算机/">计算机</a><div class="blog-slider__text">计算机,计算机网络,安全,通信,软考,linux,windows</div><a class="blog-slider__button" href="2023/05/30/计算机/">详情</a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载swiper')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script>
<script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper/swiper/swiper.min.js"></script>
<script data-pjax src="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-swiper@0.18/swiper/swiperindex.js"></script>
<style></style><script data-pjax>function electric_clock_injector_config(){
                var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
                var item_html = 'undefined';
                console.log('已挂载electric_clock')
                // parent_div_git.innerHTML=item_html+parent_div_git.innerHTML // 无报错，但不影响使用(支持pjax跳转)
                parent_div_git.insertAdjacentHTML("afterbegin",item_html) // 有报错，但不影响使用(支持pjax跳转)
            }if( document.getElementsByClassName('sticky_layout')[0] && (location.pathname ==='all'|| 'all' ==='all')){

            electric_clock_injector_config()
        } </script><script src="https://pv.sohu.com/cityjson?ie=utf-8"></script><script data-pjax  src="https://cdn.jsdelivr.net/gh/Zfour/hexo-electric-clock@1.0.6/clock.js"></script><script data-pjax>
  function butterfly_clock_anzhiyu_injector_config(){
    var parent_div_git = document.getElementsByClassName('sticky_layout')[0];
    var item_html = '<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/loading.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>';
    console.log('已挂载butterfly_clock_anzhiyu')
    if(parent_div_git) {
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  }
  var elist = 'null'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var qweather_key = 'b16a1fa0e63c46a4b8f28abfb06ae3fe';
  var gaud_map_key = 'e2b04289e870b005374ee030148d64fd&s=rsv3';
  var baidu_ak_key = 'undefined';
  var flag = 0;
  var clock_rectangle = '112.982279,28.19409';
  var clock_default_rectangle_enable = 'false';

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_clock_anzhiyu_injector_config();
  }
  else if (epage === cpage){
    butterfly_clock_anzhiyu_injector_config();
  }
  </script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="https://cdn.cbd.int/hexo-butterfly-clock-anzhiyu/lib/clock.min.js"></script><!-- hexo injector body_end end --></body></html>